(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+7AZ":function(n,t,e){"use strict";e.r(t),e.d(t,"__extends",function(){return l}),e.d(t,"__assign",function(){return o}),e.d(t,"__rest",function(){return i}),e.d(t,"__decorate",function(){return u}),e.d(t,"__param",function(){return a}),e.d(t,"__metadata",function(){return s}),e.d(t,"__awaiter",function(){return c}),e.d(t,"__generator",function(){return h}),e.d(t,"__exportStar",function(){return p}),e.d(t,"__values",function(){return f}),e.d(t,"__read",function(){return d}),e.d(t,"__spread",function(){return b}),e.d(t,"__await",function(){return g}),e.d(t,"__asyncGenerator",function(){return v}),e.d(t,"__asyncDelegator",function(){return m}),e.d(t,"__asyncValues",function(){return _}),e.d(t,"__makeTemplateObject",function(){return y}),e.d(t,"__importStar",function(){return w}),e.d(t,"__importDefault",function(){return E});var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)};function l(n,t){function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var o=function(){return(o=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var l in t=arguments[e])Object.prototype.hasOwnProperty.call(t,l)&&(n[l]=t[l]);return n}).apply(this,arguments)};function i(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(n);l<r.length;l++)t.indexOf(r[l])<0&&(e[r[l]]=n[r[l]])}return e}function u(n,t,e,r){var l,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,t,e,r);else for(var u=n.length-1;u>=0;u--)(l=n[u])&&(i=(o<3?l(i):o>3?l(t,e,i):l(t,e))||i);return o>3&&i&&Object.defineProperty(t,e,i),i}function a(n,t){return function(e,r){t(e,r,n)}}function s(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)}function c(n,t,e,r){return new(e||(e=Promise))(function(l,o){function i(n){try{a(r.next(n))}catch(t){o(t)}}function u(n){try{a(r.throw(n))}catch(t){o(t)}}function a(n){n.done?l(n.value):new e(function(t){t(n.value)}).then(i,u)}a((r=r.apply(n,t||[])).next())})}function h(n,t){var e,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;switch(r=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1],l=o;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(o);break}l[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(n,i)}catch(u){o=[6,u],r=0}finally{e=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function p(n,t){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e])}function f(n){var t="function"==typeof Symbol&&n[Symbol.iterator],e=0;return t?t.call(n):{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}}}function d(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,l,o=e.call(n),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(u){l={error:u}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(l)throw l.error}}return i}function b(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(d(arguments[t]));return n}function g(n){return this instanceof g?(this.v=n,this):new g(n)}function v(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,l=e.apply(n,t||[]),o=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(n){l[n]&&(r[n]=function(t){return new Promise(function(e,r){o.push([n,t,e,r])>1||u(n,t)})})}function u(n,t){try{(e=l[n](t)).value instanceof g?Promise.resolve(e.value.v).then(a,s):c(o[0][2],e)}catch(r){c(o[0][3],r)}var e}function a(n){u("next",n)}function s(n){u("throw",n)}function c(n,t){n(t),o.shift(),o.length&&u(o[0][0],o[0][1])}}function m(n){var t,e;return t={},r("next"),r("throw",function(n){throw n}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,l){t[r]=n[r]?function(t){return(e=!e)?{value:g(n[r](t)),done:"return"===r}:l?l(t):t}:l}}function _(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=f(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(e){t[e]=n[e]&&function(t){return new Promise(function(r,l){!function(n,t,e,r){Promise.resolve(r).then(function(t){n({value:t,done:e})},t)}(r,l,(t=n[e](t)).done,t.value)})}}}function y(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function w(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}function E(n){return n&&n.__esModule?n:{default:n}}},"30Go":function(n,t,e){"use strict";e.r(t),e.d(t,"__extends",function(){return l}),e.d(t,"__assign",function(){return o}),e.d(t,"__rest",function(){return i}),e.d(t,"__decorate",function(){return u}),e.d(t,"__param",function(){return a}),e.d(t,"__metadata",function(){return s}),e.d(t,"__awaiter",function(){return c}),e.d(t,"__generator",function(){return h}),e.d(t,"__exportStar",function(){return p}),e.d(t,"__values",function(){return f}),e.d(t,"__read",function(){return d}),e.d(t,"__spread",function(){return b}),e.d(t,"__await",function(){return g}),e.d(t,"__asyncGenerator",function(){return v}),e.d(t,"__asyncDelegator",function(){return m}),e.d(t,"__asyncValues",function(){return _}),e.d(t,"__makeTemplateObject",function(){return y}),e.d(t,"__importStar",function(){return w}),e.d(t,"__importDefault",function(){return E});var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)};function l(n,t){function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var o=function(){return(o=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var l in t=arguments[e])Object.prototype.hasOwnProperty.call(t,l)&&(n[l]=t[l]);return n}).apply(this,arguments)};function i(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(n);l<r.length;l++)t.indexOf(r[l])<0&&(e[r[l]]=n[r[l]])}return e}function u(n,t,e,r){var l,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,t,e,r);else for(var u=n.length-1;u>=0;u--)(l=n[u])&&(i=(o<3?l(i):o>3?l(t,e,i):l(t,e))||i);return o>3&&i&&Object.defineProperty(t,e,i),i}function a(n,t){return function(e,r){t(e,r,n)}}function s(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)}function c(n,t,e,r){return new(e||(e=Promise))(function(l,o){function i(n){try{a(r.next(n))}catch(t){o(t)}}function u(n){try{a(r.throw(n))}catch(t){o(t)}}function a(n){n.done?l(n.value):new e(function(t){t(n.value)}).then(i,u)}a((r=r.apply(n,t||[])).next())})}function h(n,t){var e,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;switch(r=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1],l=o;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(o);break}l[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(n,i)}catch(u){o=[6,u],r=0}finally{e=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function p(n,t){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e])}function f(n){var t="function"==typeof Symbol&&n[Symbol.iterator],e=0;return t?t.call(n):{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}}}function d(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,l,o=e.call(n),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(u){l={error:u}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(l)throw l.error}}return i}function b(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(d(arguments[t]));return n}function g(n){return this instanceof g?(this.v=n,this):new g(n)}function v(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,l=e.apply(n,t||[]),o=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(n){l[n]&&(r[n]=function(t){return new Promise(function(e,r){o.push([n,t,e,r])>1||u(n,t)})})}function u(n,t){try{(e=l[n](t)).value instanceof g?Promise.resolve(e.value.v).then(a,s):c(o[0][2],e)}catch(r){c(o[0][3],r)}var e}function a(n){u("next",n)}function s(n){u("throw",n)}function c(n,t){n(t),o.shift(),o.length&&u(o[0][0],o[0][1])}}function m(n){var t,e;return t={},r("next"),r("throw",function(n){throw n}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,l){t[r]=n[r]?function(t){return(e=!e)?{value:g(n[r](t)),done:"return"===r}:l?l(t):t}:l}}function _(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=f(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(e){t[e]=n[e]&&function(t){return new Promise(function(r,l){!function(n,t,e,r){Promise.resolve(r).then(function(t){n({value:t,done:e})},t)}(r,l,(t=n[e](t)).done,t.value)})}}}function y(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}function w(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)Object.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t.default=n,t}function E(n){return n&&n.__esModule?n:{default:n}}},OidQ:function(n,t,e){"use strict";e.r(t);var r=e("8Y7J");const l=e("AytR").a.storageBucket;class o{}var i=e("pMnS"),u=e("iInd"),a=e("SVse"),s=(e("dJ3e"),e("pLZG"));class c{constructor(n){this.authService=n}ngOnInit(){this.user$=this.authService.user$.pipe(Object(s.a)(n=>!!n))}onLogout(){this.authService.logout()}}var h=e("7dP1"),p=r.lb({encapsulation:0,styles:[[""]],data:{}});function f(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,12,"nav",[["class","navbar navbar-light bg-primary"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,5,"a",[["class","navbar-brand"],["routerLink","/contacts"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==r.vb(n,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&l),l},null,null)),r.mb(2,671744,null,0,u.p,[u.o,u.a,a.h],{routerLink:[0,"routerLink"]},null),(n()(),r.nb(3,0,null,null,1,"div",[["class","d-inline text-danger align-center bg-white rounded-circle mr-2"]],null,null,null,null,null)),(n()(),r.nb(4,0,null,null,0,"img",[["alt",""],["class","d-inline-block align-top"],["height","30"],["src","../../../../assets/icons/phone.svg"],["width","30"]],null,null,null,null,null)),(n()(),r.nb(5,0,null,null,1,"p",[["class","text-white d-inline"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Phonebook"])),(n()(),r.nb(7,0,null,null,0,"img",[["alt",""],["class","d-inline align-top mr-2 ml-auto"],["height","20"],["src","../../../../assets/icons/user-circle-solid.svg"],["width","20"]],null,null,null,null,null)),(n()(),r.nb(8,0,null,null,2,"p",[["class","text-white align-center mb-0 mr-2"]],null,null,null,null,null)),(n()(),r.Bb(9,null,["",""])),r.xb(131072,a.b,[r.h]),(n()(),r.nb(11,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(n,t,e){var r=!0;return"click"===t&&(r=!1!==n.component.onLogout()&&r),r},null,null)),(n()(),r.Bb(-1,null,["Logout"]))],function(n,t){n(t,2,0,"/contacts")},function(n,t){var e=t.component;n(t,1,0,r.vb(t,2).target,r.vb(t,2).href),n(t,9,0,r.Cb(t,9,0,r.vb(t,10).transform(e.user$)).name)})}var d=e("2Vo4"),b=e("qc5V");class g{constructor(n,t){this.apiService=n,this.router=t,this.contacts=null,this.contacts$=new d.a(null),this.loading$=new d.a(!1),this.selectedContact$=new d.a(null),this.updateErrors$=new d.a(null),this.createErrors$=new d.a(null)}get(){this.loading$.next(!0),this.apiService.get("/contacts").subscribe(n=>{this.loading$.next(!1),this.contacts=n,this.contacts$.next(this.contacts)},n=>{this.loading$.next(!1)})}create(n){this.apiService.post("/contacts",n).subscribe(n=>{this.loading$.next(!1),this.contacts.push(n),this.contacts$.next(this.contacts),this.router.navigate(["/contacts"])},n=>{this.loading$.next(!1),this.createErrors$.next(n)})}put(n){this.apiService.put(`/contacts/${this.selectedContact._id}`,n).subscribe(n=>{this.contacts=this.contacts.map(t=>t._id===n._id?n:t),this.loading$.next(!1),this.contacts$.next(this.contacts),this.selectedContact$.next(n),this.selectedContact=n,this.router.navigate(["/contacts",this.selectedContact._id])},n=>{this.loading$.next(!1),this.updateErrors$.next(n)})}getDetails(n){this.loading$.next(!0),this.apiService.get(`/contacts/${n}`).subscribe(n=>{this.loading$.next(!1),this.selectedContact=n,this.selectedContact$.next(n)},n=>{this.loading$.next(!1)})}clearDetails(){this.selectedContact=null,this.selectedContact$.next(null)}}class v{constructor(n){this.contactsService=n}ngOnInit(){this.contactsService.get()}}var m=r.lb({encapsulation:0,styles:[[".c-wrapper[_ngcontent-%COMP%]{height:100vh;max-width:1400px;margin:0 auto;display:flex;flex-flow:column;position:relative}.c-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:100}.c-content[_ngcontent-%COMP%]{margin-top:56px;flex-grow:1}.c-plus-icon[_ngcontent-%COMP%]{width:20px;height:20px;background:url(plus-solid.1e8a2cf9173583f9ee50.svg)}.c-new-contact-button[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px}"]],data:{}});function _(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,7,"div",[["class","c-wrapper"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,3,"div",[["class","c-header row m-0"]],null,null,null,null,null)),(n()(),r.nb(2,0,null,null,2,"div",[["class","col-12 p-0"]],null,null,null,null,null)),(n()(),r.nb(3,0,null,null,1,"app-header",[],null,null,null,f,p)),r.mb(4,114688,null,0,c,[h.a],null,null),(n()(),r.nb(5,0,null,null,2,"div",[["class","c-content position-relative"]],null,null,null,null,null)),(n()(),r.nb(6,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.mb(7,212992,null,0,u.r,[u.b,r.M,r.j,[8,null],r.h],null,null)],function(n,t){n(t,4,0),n(t,7,0)},null)}function y(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"app-contacts",[],null,null,null,_,m)),r.mb(1,114688,null,0,v,[g],null,null)],function(n,t){n(t,1,0)},null)}var w=r.jb("app-contacts",v,y,{},{},[]),E=e("s7LF");class S{constructor(n){this.contactsService=n,this.searchString=""}searchFilter(n){return this.searchString?n.filter(n=>n.name.toLowerCase().indexOf(this.searchString.toLocaleLowerCase())>-1):n}onSearchChange(){this.contacts&&(this.filteredContacts=this.searchFilter(this.contacts))}ngOnInit(){this.contactsService.clearDetails(),this.contactsSubscription=this.contactsService.contacts$.subscribe(n=>{this.contacts=this.filteredContacts=n})}ngOnDestroy(){this.contactsSubscription.unsubscribe()}}var C=r.lb({encapsulation:0,styles:[[".c-wrapper[_ngcontent-%COMP%]{min-height:calc(100% - 46px);margin:46px auto 0;position:relative}.c-new-contact-button[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px}.content[_ngcontent-%COMP%]{height:1500px;background-color:pink}.c-contact-card[_ngcontent-%COMP%]{text-decoration:none;color:inherit}.c-search-input[_ngcontent-%COMP%]{position:fixed;top:56px;left:0;right:0;z-index:100}.c-search-input-content[_ngcontent-%COMP%]{margin:0 auto;max-width:600px}"]],data:{}});function O(n){return r.Db(0,[(n()(),r.nb(0,0,[["emptyHeader",1]],null,1,"h4",[["class","text-center mt-2"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Contact list is empty now"]))],null,null)}function R(n){return r.Db(0,[(n()(),r.nb(0,0,[["emptyHeader",1]],null,1,"h4",[["class","text-center mt-2"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Contacts not found"]))],null,null)}function k(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,12,"div",[["class","card mb-3 mx-auto bg-light"],["style","max-width: 600px;"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,11,"a",[["class","c-contact-card"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==r.vb(n,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&l),l},null,null)),r.mb(2,671744,null,0,u.p,[u.o,u.a,a.h],{routerLink:[0,"routerLink"]},null),r.wb(3,2),(n()(),r.nb(4,0,null,null,8,"div",[["class","row no-gutters"]],null,null,null,null,null)),(n()(),r.nb(5,0,null,null,1,"div",[["class","col-4"]],null,null,null,null,null)),(n()(),r.nb(6,0,null,null,0,"img",[["alt",""],["class","card-img"],["style","max-height: 150px; object-fit: contain"]],[[8,"src",4]],null,null,null,null)),(n()(),r.nb(7,0,null,null,5,"div",[["class","col-8"]],null,null,null,null,null)),(n()(),r.nb(8,0,null,null,4,"div",[["class","card-body"]],null,null,null,null,null)),(n()(),r.nb(9,0,null,null,1,"h5",[["class","card-title"]],null,null,null,null,null)),(n()(),r.Bb(10,null,["",""])),(n()(),r.nb(11,0,null,null,1,"p",[["class","card-text"]],null,null,null,null,null)),(n()(),r.Bb(12,null,["",""]))],function(n,t){var e=n(t,3,0,"/contacts",t.context.$implicit._id);n(t,2,0,e)},function(n,t){n(t,1,0,r.vb(t,2).target,r.vb(t,2).href),n(t,6,0,t.context.$implicit.avatar),n(t,10,0,t.context.$implicit.name),n(t,12,0,t.context.$implicit.phone)})}function x(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,7,"div",[["class","c-search-input px-3"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,6,"div",[["class","c-search-input-content form-group text-center"]],null,null,null,null,null)),(n()(),r.nb(2,0,null,null,5,"input",[["class","form-control mt-2"],["name","searchString"],["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0,o=n.component;return"input"===t&&(l=!1!==r.vb(n,3)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,3).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,3)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,3)._compositionEnd(e.target.value)&&l),"ngModelChange"===t&&(l=!1!==(o.searchString=e)&&l),"input"===t&&(l=!1!==o.onSearchChange()&&l),l},null,null)),r.mb(3,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(5,671744,null,0,E.l,[[8,null],[8,null],[8,null],[6,E.h]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),r.zb(2048,null,E.i,null,[E.l]),r.mb(7,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.nb(8,0,null,null,10,"div",[["class","c-wrapper p-3"]],null,null,null,null,null)),(n()(),r.cb(16777216,null,null,1,null,O)),r.mb(10,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.cb(16777216,null,null,1,null,R)),r.mb(12,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.cb(16777216,null,null,1,null,k)),r.mb(14,278528,null,0,a.j,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(n()(),r.nb(15,0,null,null,3,"a",[["routerLink","/contacts/new"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==r.vb(n,16).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&l),l},null,null)),r.mb(16,671744,null,0,u.p,[u.o,u.a,a.h],{routerLink:[0,"routerLink"]},null),(n()(),r.nb(17,0,null,null,1,"button",[["class","c-new-contact-button btn d-flex align-items-center justify-content-center p-2 rounded-circle bg-primary text-danger"]],null,null,null,null,null)),(n()(),r.nb(18,0,null,null,0,"img",[["alt",""],["class","text-danger"],["height","30"],["src","../../../../assets/icons/plus-solid.svg"],["width","30"]],null,null,null,null,null))],function(n,t){var e=t.component;n(t,5,0,"searchString",!e.contacts||!e.contacts.length,e.searchString),n(t,10,0,!e.contacts||0===e.contacts.length),n(t,12,0,0!==e.searchString.length&&0===e.filteredContacts.length),n(t,14,0,e.filteredContacts),n(t,16,0,"/contacts/new")},function(n,t){n(t,2,0,r.vb(t,7).ngClassUntouched,r.vb(t,7).ngClassTouched,r.vb(t,7).ngClassPristine,r.vb(t,7).ngClassDirty,r.vb(t,7).ngClassValid,r.vb(t,7).ngClassInvalid,r.vb(t,7).ngClassPending),n(t,15,0,r.vb(t,16).target,r.vb(t,16).href)})}function A(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"app-contact-list",[],null,null,null,x,C)),r.mb(1,245760,null,0,S,[g],null,null)],function(n,t){n(t,1,0)},null)}var T=r.jb("app-contact-list",S,A,{},{},[]);class I{constructor(n,t){this.contactsService=n,this.fireStorage=t,this.fileRef=null}createContact(n){this.contactsService.loading$.next(!0),n.avatar?this.uploadAvatarToFirebase({image:n.avatar,contact:n}):this.uploadToServer(n)}uploadAvatarToFirebase(n){this.fileRef=this.fireStorage.ref(`/avatars/${n.contact.name}_${n.contact.phone}`),this.fileRef.put(n.image).then(n=>n.ref.getDownloadURL()).then(t=>{this.uploadToServer(n.contact,t)})}uploadToServer(n,t){const e=this.formatData(n,t);this.contactsService.create(e)}formatData(n,t){const e=Object.assign({},n);return e.email||delete e.email,e.company||delete e.company,e.avatar||delete e.avatar,t&&(e.avatar=t),e}}var N=e("HDdC"),P=e("lJxs");function D(n){const t=function(n){return new N.a(t=>(n.on("state_changed",n=>t.next(n),n=>t.error(n),()=>t.complete()),()=>n.cancel()))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe(Object(P.a)(n=>n.bytesTransferred/n.totalBytes*100))}}var U=e("Cfvw");function L(n,t){return{getDownloadURL:()=>t.keepUnstableUntilFirst(t.runOutsideAngular(Object(U.a)(t.zone.runOutsideAngular(()=>n.getDownloadURL())))),getMetadata:()=>t.keepUnstableUntilFirst(t.runOutsideAngular(Object(U.a)(t.zone.runOutsideAngular(()=>n.getMetadata())))),delete:()=>Object(U.a)(n.delete()),child:e=>L(n.child(e),t),updateMetatdata:t=>Object(U.a)(n.updateMetadata(t)),updateMetadata:t=>Object(U.a)(n.updateMetadata(t)),put:(t,e)=>D(n.put(t,e)),putString:(t,e,r)=>D(n.putString(t,e,r))}}var j=e("quSY");class M extends j.a{constructor(n,t){super()}schedule(n,t=0){return this}}class F extends M{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){if(this.closed)return this;this.state=n;const e=this.id,r=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(r,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(n,t,e=0){return setInterval(n.flush.bind(n,this),e)}recycleAsyncId(n,t,e=0){if(null!==e&&this.delay===e&&!1===this.pending)return t;clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(n,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let e=!1,r=void 0;try{this.work(n)}catch(l){e=!0,r=!!l&&l||new Error(l)}if(e)return this.unsubscribe(),r}_unsubscribe(){const n=this.id,t=this.scheduler,e=t.actions,r=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&e.splice(r,1),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null}}class B extends F{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}schedule(n,t=0){return t>0?super.schedule(n,t):(this.delay=t,this.state=n,this.scheduler.flush(this),this)}execute(n,t){return t>0||this.closed?super.execute(n,t):this._execute(n,t)}requestAsyncId(n,t,e=0){return null!==e&&e>0||null===e&&this.delay>0?super.requestAsyncId(n,t,e):n.flush(this)}}const V=(()=>{class n{constructor(t,e=n.now){this.SchedulerAction=t,this.now=e}schedule(n,t=0,e){return new this.SchedulerAction(this,n).schedule(e,t)}}return n.now=(()=>Date.now()),n})();class z extends V{constructor(n,t=V.now){super(n,()=>z.delegate&&z.delegate!==this?z.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,t=0,e){return z.delegate&&z.delegate!==this?z.delegate.schedule(n,t,e):super.schedule(n,t,e)}flush(n){const{actions:t}=this;if(this.active)return void t.push(n);let e;this.active=!0;do{if(e=n.execute(n.state,n.delay))break}while(n=t.shift());if(this.active=!1,e){for(;n=t.shift();)n.unsubscribe();throw e}}}class q extends z{}const W=new q(B);class ${constructor(n,t){this.zone=n,this.platformId=t}schedule(...n){return this.zone.runGuarded(function(){return W.schedule.apply(W,n)})}keepUnstableUntilFirst(n){return Object(a.q)(this.platformId)?new N.a(t=>{const e=()=>{},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",e,{},e,e);n.subscribe(n=>{"scheduled"===r.state&&r.invoke(),t.next(n)},n=>{"scheduled"===r.state&&r.invoke(),t.error(n)},()=>{"scheduled"===r.state&&r.invoke(),t.complete()})}):n}runOutsideAngular(n){return new N.a(t=>this.zone.runOutsideAngular(()=>n.subscribe(n=>this.zone.run(()=>t.next(n)),n=>this.zone.run(()=>t.error(n)),()=>this.zone.run(()=>t.complete()))))}}var G,H=e("Wcq6"),K=e.n(H);const J=new r.o("angularfire2.app.options"),X=new r.o("angularfire2.app.nameOrConfig");class Z{}function Y(n,t){const e="object"==typeof t&&t||{};return e.name=e.name||"string"==typeof t&&t||"[DEFAULT]",K.a.apps.filter(n=>n&&n.name===e.name)[0]||K.a.initializeApp(n,e)}const Q=(()=>G=class{static initializeApp(n,t){return{ngModule:G,providers:[{provide:J,useValue:n},{provide:X,useValue:t}]}}})(),nn=new r.o("angularfire2.storageBucket"),tn=(()=>(class{constructor(n,t,e,r,l){this.scheduler=new $(l,r),this.storage=l.runOutsideAngular(()=>Y(n,t).storage(e||void 0))}ref(n){return L(this.storage.ref(n),this.scheduler)}upload(n,t,e){return L(this.storage.ref(n),this.scheduler).put(t,e)}}))();class en{constructor(n,t,e){this.fb=n,this.contactsService=t,this.contactCreateService=e,this.avatarImage=null,this.contactForm=this.fb.group({avatar:[null],name:["",E.n.required],phone:["+380",[E.n.required,E.n.pattern(/^[+]{1}[0-9]{12}$/)]],email:[null,this.customEmailValidator],company:[null]})}ngOnInit(){this.errorsSub$=this.contactsService.loading$.subscribe(n=>this.loading=n),this.errorsSub$=this.contactsService.createErrors$.pipe(Object(s.a)(n=>!!n)).subscribe(n=>{this.serverErrorHandler(n)})}ngOnDestroy(){this.errorsSub$.unsubscribe(),this.errorsSub$.unsubscribe()}customEmailValidator(n){return n.value?/\S+@\S+\.\S+/.test(n.value)?null:{email:!0}:null}onSubmit(){this.contactCreateService.createContact(this.contactForm.value)}serverErrorHandler(n){n.forEach(n=>{this.contactForm.controls[n.param].setErrors({serverValidation:{value:!0,message:n.msg}})})}onFileChange(n){const t=new FileReader;if(n.target.files&&n.target.files.length){const[e]=n.target.files;t.readAsDataURL(e),t.onload=(()=>{this.avatarImage=t.result,this.contactForm.patchValue({avatar:e})})}}isInputValid(n){return this.contactForm.controls[n].touched&&this.contactForm.controls[n].invalid}getValidationErrorMessage(n){switch(n){case"name":if(this.contactForm.controls[n].errors.required)return"Name is required";if(this.contactForm.controls[n].errors.serverValidation)return this.contactForm.controls[n].errors.serverValidation.message;break;case"email":if(this.contactForm.controls[n].errors.required)return"Email is required";if(this.contactForm.controls[n].errors.email)return"Email should be a valid email address";if(this.contactForm.controls[n].errors.serverValidation)return this.contactForm.controls[n].errors.serverValidation.message;break;case"phone":if(this.contactForm.controls[n].errors.required)return"Phone is required";if(this.contactForm.controls[n].errors.pattern)return"Phone should be a valid phone number";if(this.contactForm.controls[n].errors.serverValidation)return this.contactForm.controls[n].errors.serverValidation.message}}}var rn=r.lb({encapsulation:0,styles:[[".c-avatarImage[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;border-radius:50%}.c-form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #ff000026}"]],data:{}});function ln(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("name"))})}function on(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("phone"))})}function un(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("email"))})}function an(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("company"))})}function sn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,3,"div",[["class","d-flex align-items-center justify-content-center"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,2,"div",[["class","spinner-border text-primary mx-auto"],["role","status"]],null,null,null,null,null)),(n()(),r.nb(2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Loading..."]))],null,null)}function cn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"button",[["class","btn btn-primary px-5 d-block mx-auto"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),r.Bb(-1,null,[" Create "]))],null,function(n,t){n(t,0,0,!t.component.contactForm.valid)})}function hn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,63,"div",[["class","p-2"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,1,"div",[["class","c-avatarContainer"]],null,null,null,null,null)),(n()(),r.nb(2,0,null,null,0,"img",[["alt",""],["class","c-avatarImage d-block mx-auto"],["height","200"],["width","200"]],[[8,"src",4]],null,null,null,null)),(n()(),r.nb(3,0,null,null,60,"form",[["class","c-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,t,e){var l=!0,o=n.component;return"submit"===t&&(l=!1!==r.vb(n,5).onSubmit(e)&&l),"reset"===t&&(l=!1!==r.vb(n,5).onReset()&&l),"ngSubmit"===t&&(l=!1!==o.onSubmit()&&l),l},null,null)),r.mb(4,16384,null,0,E.r,[],null,null),r.mb(5,540672,null,0,E.f,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.zb(2048,null,E.b,null,[E.f]),r.mb(7,16384,null,0,E.k,[[4,E.b]],null,null),(n()(),r.nb(8,0,null,null,3,"div",[["class","form-group text-center pt-3 mb-0"]],null,null,null,null,null)),(n()(),r.nb(9,0,null,null,2,"label",[["class","c-upload-button btn btn-secondary"]],null,null,null,null,null)),(n()(),r.Bb(10,null,[""," "])),(n()(),r.nb(11,0,null,null,0,"input",[["class","form-control mt-2"],["hidden",""],["type","file"]],[[8,"readOnly",0]],[[null,"change"]],function(n,t,e){var r=!0;return"change"===t&&(r=!1!==n.component.onFileChange(e)&&r),r},null,null)),(n()(),r.nb(12,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(13,0,null,null,11,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Name"])),(n()(),r.nb(15,0,null,null,1,"sup",[["class","text-danger p"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,[" *"])),(n()(),r.nb(17,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","name"],["type","text"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,18)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,18).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,18)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,18)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(18,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(20,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(22,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,ln)),r.mb(24,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.nb(25,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(26,0,null,null,11,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Phone"])),(n()(),r.nb(28,0,null,null,1,"sup",[["class","text-danger p"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,[" *"])),(n()(),r.nb(30,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","phone"],["type","text"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,31)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,31).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,31)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,31)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(31,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(33,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(35,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,on)),r.mb(37,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.nb(38,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(39,0,null,null,9,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Email "])),(n()(),r.nb(41,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","email"],["type","email"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,42)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,42).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,42)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,42)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(42,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(44,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(46,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,un)),r.mb(48,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.nb(49,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(50,0,null,null,9,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Company "])),(n()(),r.nb(52,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","company"],["type","text"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,53)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,53).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,53)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,53)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(53,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(55,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(57,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,an)),r.mb(59,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.cb(16777216,null,null,1,null,sn)),r.mb(61,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.cb(16777216,null,null,1,null,cn)),r.mb(63,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(n,t){var e=t.component;n(t,5,0,e.contactForm),n(t,20,0,"name"),n(t,24,0,e.isInputValid("name")),n(t,33,0,"phone"),n(t,37,0,e.isInputValid("phone")),n(t,44,0,"email"),n(t,48,0,e.isInputValid("email")),n(t,55,0,"company"),n(t,59,0,e.isInputValid("company")),n(t,61,0,e.loading),n(t,63,0,!e.loading)},function(n,t){var e=t.component;n(t,2,0,e.avatarImage||"../../../../assets/images/avatar.png"),n(t,3,0,r.vb(t,7).ngClassUntouched,r.vb(t,7).ngClassTouched,r.vb(t,7).ngClassPristine,r.vb(t,7).ngClassDirty,r.vb(t,7).ngClassValid,r.vb(t,7).ngClassInvalid,r.vb(t,7).ngClassPending),n(t,10,0,e.avatarImage?"Update image":"Upload image"),n(t,11,0,e.loading),n(t,17,0,e.loading,r.vb(t,22).ngClassUntouched,r.vb(t,22).ngClassTouched,r.vb(t,22).ngClassPristine,r.vb(t,22).ngClassDirty,r.vb(t,22).ngClassValid,r.vb(t,22).ngClassInvalid,r.vb(t,22).ngClassPending),n(t,30,0,e.loading,r.vb(t,35).ngClassUntouched,r.vb(t,35).ngClassTouched,r.vb(t,35).ngClassPristine,r.vb(t,35).ngClassDirty,r.vb(t,35).ngClassValid,r.vb(t,35).ngClassInvalid,r.vb(t,35).ngClassPending),n(t,41,0,e.loading,r.vb(t,46).ngClassUntouched,r.vb(t,46).ngClassTouched,r.vb(t,46).ngClassPristine,r.vb(t,46).ngClassDirty,r.vb(t,46).ngClassValid,r.vb(t,46).ngClassInvalid,r.vb(t,46).ngClassPending),n(t,52,0,e.loading,r.vb(t,57).ngClassUntouched,r.vb(t,57).ngClassTouched,r.vb(t,57).ngClassPristine,r.vb(t,57).ngClassDirty,r.vb(t,57).ngClassValid,r.vb(t,57).ngClassInvalid,r.vb(t,57).ngClassPending)})}function pn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,2,"app-contact-create",[],null,null,null,hn,rn)),r.zb(512,null,I,I,[g,tn]),r.mb(2,245760,null,0,en,[E.d,g,I],null,null)],function(n,t){n(t,2,0)},null)}var fn=r.jb("app-contact-create",en,pn,{},{},[]);class dn{constructor(n,t){this.contactsServise=n,this.route=t,this.fetching=!0}ngOnInit(){this.contactsServise.selectedContact$.subscribe(n=>{this.contact=n}),this.contactsServise.loading$.subscribe(n=>{this.fetching=n}),this.route.params.subscribe(n=>{console.log(n),this.contactsServise.getDetails(n.id)})}onCall(){console.log(this.contact._id)}}var bn=r.lb({encapsulation:0,styles:[[".c-edit-button[_ngcontent-%COMP%]{position:absolute;top:15px;right:20px}"]],data:{}});function gn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,4,"div",[["class","d-flex align-items-center justify-content-between mt-2"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,1,"h6",[],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Email"])),(n()(),r.nb(3,0,null,null,1,"h5",[],null,null,null,null,null)),(n()(),r.Bb(4,null,["",""]))],null,function(n,t){n(t,4,0,t.component.contact.email)})}function vn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,4,"div",[["class","d-flex align-items-center justify-content-between mt-2"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,1,"h6",[],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Company"])),(n()(),r.nb(3,0,null,null,1,"h5",[],null,null,null,null,null)),(n()(),r.Bb(4,null,["",""]))],null,function(n,t){n(t,4,0,t.component.contact.company)})}function mn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,22,"div",[["class","c-contact-details row m-0 p-3 h-100"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,21,"div",[["class","col-10 col-sm-8 col-md-6 offset-1 offset-sm-2 offset-md-3 p-0 card"]],null,null,null,null,null)),(n()(),r.nb(2,0,null,null,0,"img",[["alt","..."],["class","card-img-top"]],[[8,"src",4]],null,null,null,null)),(n()(),r.nb(3,0,null,null,19,"div",[["class","card-body d-flex flex-column position-relative"]],null,null,null,null,null)),(n()(),r.nb(4,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==r.vb(n,5).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&l),l},null,null)),r.mb(5,671744,null,0,u.p,[u.o,u.a,a.h],{routerLink:[0,"routerLink"]},null),r.wb(6,3),(n()(),r.nb(7,0,null,null,1,"button",[["class","c-edit-button btn d-flex align-items-center justify-content-center p-2 rounded-circle bg-light"]],null,null,null,null,null)),(n()(),r.nb(8,0,null,null,0,"img",[["alt",""],["height","20"],["src","../../../../assets/icons/edit-regular.svg"],["width","20"]],null,null,null,null,null)),(n()(),r.nb(9,0,null,null,1,"h5",[["class","card-title text-center mb-3"]],null,null,null,null,null)),(n()(),r.Bb(10,null,["",""])),(n()(),r.nb(11,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(n()(),r.nb(12,0,null,null,4,"div",[["class","d-flex align-items-center justify-content-between mt-2"]],null,null,null,null,null)),(n()(),r.nb(13,0,null,null,1,"h6",[],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Phone"])),(n()(),r.nb(15,0,null,null,1,"h5",[],null,null,null,null,null)),(n()(),r.Bb(16,null,["",""])),(n()(),r.cb(16777216,null,null,1,null,gn)),r.mb(18,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.cb(16777216,null,null,1,null,vn)),r.mb(20,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.nb(21,0,null,null,1,"button",[["class","btn btn-success mt-auto"]],null,[[null,"click"]],function(n,t,e){var r=!0;return"click"===t&&(r=!1!==n.component.onCall()&&r),r},null,null)),(n()(),r.Bb(-1,null,["Call"]))],function(n,t){var e=t.component,r=n(t,6,0,"/contacts",e.contact._id,"edit");n(t,5,0,r),n(t,18,0,e.contact.email),n(t,20,0,e.contact.company)},function(n,t){var e=t.component;n(t,2,0,e.contact.avatar),n(t,4,0,r.vb(t,5).target,r.vb(t,5).href),n(t,10,0,e.contact.name),n(t,16,0,e.contact.phone)})}function _n(n){return r.Db(0,[(n()(),r.cb(16777216,null,null,1,null,mn)),r.mb(1,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(n,t){n(t,1,0,t.component.contact)},null)}function yn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"app-contact-details",[],null,null,null,_n,bn)),r.mb(1,114688,null,0,dn,[g,u.a],null,null)],function(n,t){n(t,1,0)},null)}var wn=r.jb("app-contact-details",dn,yn,{},{},[]);class En{constructor(n,t){this.contactsService=n,this.fireStorage=t,this.fileRef=null}updateContact(n){this.contactsService.loading$.next(!0),n.image?this.uploadAvatarToFirebase({image:n.image,contact:n.contact}):this.uploadToServer(n.contact)}uploadAvatarToFirebase(n){this.fileRef=this.fireStorage.ref(`/avatars/${n.contact.name}_${n.contact.phone}`),this.fileRef.put(n.image).then(n=>n.ref.getDownloadURL()).then(t=>{this.uploadToServer(n.contact,t)})}uploadToServer(n,t){const e=this.formatData(n,t);this.contactsService.put(e)}formatData(n,t){const e=Object.assign({},n);return e.email||delete e.email,e.company||delete e.company,t&&(e.avatar=t),e}}class Sn{constructor(n,t,e){this.fb=n,this.contactsService=t,this.contactEditService=e,this.avatarImage=null,this.imageFile=null,this.contactForm=this.fb.group({avatar:[null],name:[null,E.n.required],phone:[null,[E.n.required,E.n.pattern(/^[+]{1}[0-9]{12}$/)]],email:[null,this.customEmailValidator],company:[null]})}customEmailValidator(n){return n.value?/\S+@\S+\.\S+/.test(n.value)?null:{email:!0}:null}ngOnInit(){this.loadingSub$=this.contactsService.loading$.subscribe(n=>this.loading=n),this.contactSub$=this.contactsService.selectedContact$.pipe(Object(s.a)(n=>!!n)).subscribe(n=>{this.contact=n,this.formSeed()}),this.errorsSub$=this.contactsService.updateErrors$.pipe(Object(s.a)(n=>!!n)).subscribe(n=>{this.serverErrorHandler(n)})}ngOnDestroy(){this.contactSub$.unsubscribe(),this.errorsSub$.unsubscribe(),this.loadingSub$.unsubscribe()}formSeed(){this.contactForm.patchValue({avatar:this.contact.avatar,name:this.contact.name,phone:this.contact.phone,email:this.contact.email||null,company:this.contact.company||null}),this.avatarImage=this.contact.avatar}onSubmit(){this.contactEditService.updateContact(this.imageFile?{image:this.imageFile,contact:this.contactForm.value}:{contact:this.contactForm.value})}serverErrorHandler(n){n.forEach(n=>{this.contactForm.controls[n.param].setErrors({serverValidation:{value:!0,message:n.msg}})})}onFileChange(n){const t=new FileReader;if(n.target.files&&n.target.files.length){const[e]=n.target.files;t.readAsDataURL(e),t.onload=(()=>{this.avatarImage=t.result,this.imageFile=e})}}isInputValid(n){return this.contactForm.controls[n].touched&&this.contactForm.controls[n].invalid}getValidationErrorMessage(n){switch(n){case"name":if(this.contactForm.controls[n].errors.required)return"Name is required";if(this.contactForm.controls[n].errors.serverValidation)return this.contactForm.controls[n].errors.serverValidation.message;break;case"email":if(this.contactForm.controls[n].errors.required)return"Email is required";if(this.contactForm.controls[n].errors.email)return"Email should be a valid email address";if(this.contactForm.controls[n].errors.serverValidation)return this.contactForm.controls[n].errors.serverValidation.message;break;case"phone":if(this.contactForm.controls[n].errors.required)return"Phone is required";if(this.contactForm.controls[n].errors.pattern)return"Phone should be a valid phone number";if(this.contactForm.controls[n].errors.serverValidation)return this.contactForm.controls[n].errors.serverValidation.message}}}var Cn=r.lb({encapsulation:0,styles:[[".c-avatarImage[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain;border-radius:50%}.c-form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #ff000026}.c-edit-button[_ngcontent-%COMP%]{position:absolute;top:15px;left:20px}"]],data:{}});function On(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("name"))})}function Rn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("phone"))})}function kn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("email"))})}function xn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"small",[["class","text-danger"]],null,null,null,null,null)),(n()(),r.Bb(1,null,[" "," "]))],null,function(n,t){n(t,1,0,t.component.getValidationErrorMessage("company"))})}function An(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,3,"div",[["class","d-flex align-items-center justify-content-center"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,2,"div",[["class","spinner-border text-primary mx-auto"],["role","status"]],null,null,null,null,null)),(n()(),r.nb(2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Loading..."]))],null,null)}function Tn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,1,"button",[["class","btn btn-primary px-5 d-block mx-auto"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),r.Bb(-1,null,[" Update "]))],null,function(n,t){n(t,0,0,!t.component.contactForm.valid)})}function In(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,68,"div",[["class","p-2"]],null,null,null,null,null)),(n()(),r.nb(1,0,null,null,6,"div",[["class","c-avatarContainer position-relative"]],null,null,null,null,null)),(n()(),r.nb(2,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==r.vb(n,3).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&l),l},null,null)),r.mb(3,671744,null,0,u.p,[u.o,u.a,a.h],{routerLink:[0,"routerLink"]},null),r.wb(4,2),(n()(),r.nb(5,0,null,null,1,"button",[["class","c-edit-button btn d-flex align-items-center justify-content-center p-2 rounded-circle bg-light"]],null,null,null,null,null)),(n()(),r.nb(6,0,null,null,0,"img",[["alt",""],["height","20"],["src","../../../../assets/icons/arrow-left-solid.svg"],["width","20"]],null,null,null,null,null)),(n()(),r.nb(7,0,null,null,0,"img",[["alt",""],["class","c-avatarImage d-block mx-auto"],["height","200"],["width","200"]],[[8,"src",4]],null,null,null,null)),(n()(),r.nb(8,0,null,null,60,"form",[["class","c-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(n,t,e){var l=!0,o=n.component;return"submit"===t&&(l=!1!==r.vb(n,10).onSubmit(e)&&l),"reset"===t&&(l=!1!==r.vb(n,10).onReset()&&l),"ngSubmit"===t&&(l=!1!==o.onSubmit()&&l),l},null,null)),r.mb(9,16384,null,0,E.r,[],null,null),r.mb(10,540672,null,0,E.f,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.zb(2048,null,E.b,null,[E.f]),r.mb(12,16384,null,0,E.k,[[4,E.b]],null,null),(n()(),r.nb(13,0,null,null,3,"div",[["class","form-group text-center pt-3 mb-0"]],null,null,null,null,null)),(n()(),r.nb(14,0,null,null,2,"label",[["class","c-upload-button btn btn-secondary"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Update image "])),(n()(),r.nb(16,0,null,null,0,"input",[["class","form-control mt-2"],["hidden",""],["type","file"]],[[8,"readOnly",0]],[[null,"change"]],function(n,t,e){var r=!0;return"change"===t&&(r=!1!==n.component.onFileChange(e)&&r),r},null,null)),(n()(),r.nb(17,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(18,0,null,null,11,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Name"])),(n()(),r.nb(20,0,null,null,1,"sup",[["class","text-danger p"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,[" *"])),(n()(),r.nb(22,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","name"],["type","text"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,23)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,23).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,23)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,23)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(23,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(25,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(27,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,On)),r.mb(29,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.nb(30,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(31,0,null,null,11,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Phone"])),(n()(),r.nb(33,0,null,null,1,"sup",[["class","text-danger p"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,[" *"])),(n()(),r.nb(35,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","phone"],["type","text"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,36)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,36).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,36)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,36)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(36,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(38,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(40,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,Rn)),r.mb(42,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.nb(43,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(44,0,null,null,9,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Email "])),(n()(),r.nb(46,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","email"],["type","email"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,47)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,47).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,47)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,47)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(47,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(49,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(51,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,kn)),r.mb(53,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.nb(54,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),r.nb(55,0,null,null,9,"label",[["class","d-block"]],null,null,null,null,null)),(n()(),r.Bb(-1,null,["Company "])),(n()(),r.nb(57,0,null,null,5,"input",[["class","form-control mt-2"],["formControlName","company"],["type","text"]],[[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var l=!0;return"input"===t&&(l=!1!==r.vb(n,58)._handleInput(e.target.value)&&l),"blur"===t&&(l=!1!==r.vb(n,58).onTouched()&&l),"compositionstart"===t&&(l=!1!==r.vb(n,58)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r.vb(n,58)._compositionEnd(e.target.value)&&l),l},null,null)),r.mb(58,16384,null,0,E.c,[r.B,r.k,[2,E.a]],null,null),r.zb(1024,null,E.h,function(n){return[n]},[E.c]),r.mb(60,671744,null,0,E.e,[[3,E.b],[8,null],[8,null],[6,E.h],[2,E.q]],{name:[0,"name"]},null),r.zb(2048,null,E.i,null,[E.e]),r.mb(62,16384,null,0,E.j,[[4,E.i]],null,null),(n()(),r.cb(16777216,null,null,1,null,xn)),r.mb(64,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.cb(16777216,null,null,1,null,An)),r.mb(66,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(n()(),r.cb(16777216,null,null,1,null,Tn)),r.mb(68,16384,null,0,a.k,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(n,t){var e=t.component,r=n(t,4,0,"/contacts",e.contact._id);n(t,3,0,r),n(t,10,0,e.contactForm),n(t,25,0,"name"),n(t,29,0,e.isInputValid("name")),n(t,38,0,"phone"),n(t,42,0,e.isInputValid("phone")),n(t,49,0,"email"),n(t,53,0,e.isInputValid("email")),n(t,60,0,"company"),n(t,64,0,e.isInputValid("company")),n(t,66,0,e.loading),n(t,68,0,!e.loading)},function(n,t){var e=t.component;n(t,2,0,r.vb(t,3).target,r.vb(t,3).href),n(t,7,0,e.avatarImage),n(t,8,0,r.vb(t,12).ngClassUntouched,r.vb(t,12).ngClassTouched,r.vb(t,12).ngClassPristine,r.vb(t,12).ngClassDirty,r.vb(t,12).ngClassValid,r.vb(t,12).ngClassInvalid,r.vb(t,12).ngClassPending),n(t,16,0,e.loading),n(t,22,0,e.loading,r.vb(t,27).ngClassUntouched,r.vb(t,27).ngClassTouched,r.vb(t,27).ngClassPristine,r.vb(t,27).ngClassDirty,r.vb(t,27).ngClassValid,r.vb(t,27).ngClassInvalid,r.vb(t,27).ngClassPending),n(t,35,0,e.loading,r.vb(t,40).ngClassUntouched,r.vb(t,40).ngClassTouched,r.vb(t,40).ngClassPristine,r.vb(t,40).ngClassDirty,r.vb(t,40).ngClassValid,r.vb(t,40).ngClassInvalid,r.vb(t,40).ngClassPending),n(t,46,0,e.loading,r.vb(t,51).ngClassUntouched,r.vb(t,51).ngClassTouched,r.vb(t,51).ngClassPristine,r.vb(t,51).ngClassDirty,r.vb(t,51).ngClassValid,r.vb(t,51).ngClassInvalid,r.vb(t,51).ngClassPending),n(t,57,0,e.loading,r.vb(t,62).ngClassUntouched,r.vb(t,62).ngClassTouched,r.vb(t,62).ngClassPristine,r.vb(t,62).ngClassDirty,r.vb(t,62).ngClassValid,r.vb(t,62).ngClassInvalid,r.vb(t,62).ngClassPending)})}function Nn(n){return r.Db(0,[(n()(),r.nb(0,0,null,null,2,"app-contact-edit",[],null,null,null,In,Cn)),r.zb(512,null,En,En,[g,tn]),r.mb(2,245760,null,0,Sn,[E.d,g,En],null,null)],function(n,t){n(t,2,0)},null)}var Pn=r.jb("app-contact-edit",Sn,Nn,{},{},[]),Dn=e("IheW"),Un=e("wj3C"),Ln=e.n(Un),jn="firebasestorage.googleapis.com",Mn="storageBucket",Fn=12e4,Bn=6e4,Vn=-9007199254740991,zn=function(){function n(n,t){this.code_=Wn(n),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return n.prototype.codeProp=function(){return this.code},n.prototype.codeEquals=function(n){return Wn(n)===this.codeProp()},n.prototype.serverResponseProp=function(){return this.serverResponse_},n.prototype.setServerResponseProp=function(n){this.serverResponse_=n},Object.defineProperty(n.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),n}(),qn={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function Wn(n){return"storage/"+n}function $n(){return new zn(qn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Gn(){return new zn(qn.CANCELED,"User canceled the upload/download.")}function Hn(){return new zn(qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Kn(n,t,e){return new zn(qn.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+n+": "+e)}function Jn(){return new zn(qn.APP_DELETED,"The Firebase app was deleted.")}function Xn(n,t){return new zn(qn.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function Zn(n){throw new zn(qn.INTERNAL_ERROR,"Internal error: "+n)}var Yn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Qn(n){switch(n){case Yn.RAW:case Yn.BASE64:case Yn.BASE64URL:case Yn.DATA_URL:return;default:throw"Expected one of the event types: ["+Yn.RAW+", "+Yn.BASE64+", "+Yn.BASE64URL+", "+Yn.DATA_URL+"]."}}var nt=function(){return function(n,t){this.data=n,this.contentType=t||null}}();function tt(n,t){switch(n){case Yn.RAW:return new nt(et(t));case Yn.BASE64:case Yn.BASE64URL:return new nt(rt(n,t));case Yn.DATA_URL:return new nt(function(n){var t=new lt(n);return t.base64?rt(Yn.BASE64,t.rest):function(n){var t;try{t=decodeURIComponent(n)}catch(e){throw Xn(Yn.DATA_URL,"Malformed data URL.")}return et(t)}(t.rest)}(t),function(n){return new lt(n).contentType}(t))}throw $n()}function et(n){for(var t=[],e=0;e<n.length;e++){var r=n.charCodeAt(e);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(e<n.length-1&&56320==(64512&n.charCodeAt(e+1))){var l=r,o=n.charCodeAt(++e);t.push(240|(r=65536|(1023&l)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function rt(n,t){switch(n){case Yn.BASE64:var e=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(e||r)throw Xn(n,"Invalid character '"+(e?"-":"_")+"' found: is it base64url encoded?");break;case Yn.BASE64URL:var l=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(l||o)throw Xn(n,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(s){throw Xn(n,"Invalid character found")}for(var u=new Uint8Array(i.length),a=0;a<i.length;a++)u[a]=i.charCodeAt(a);return u}var lt=function(){return function(n){this.base64=!1,this.contentType=null;var t=n.match(/^data:([^,]+)?,/);if(null===t)throw Xn(Yn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var e,r=t[1]||null;null!=r&&(this.base64=(e=r).length>=";base64".length&&";base64"===e.substring(e.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=n.substring(n.indexOf(",")+1)}}(),ot={STATE_CHANGED:"state_changed"},it={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},ut={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function at(n){switch(n){case it.RUNNING:case it.PAUSING:case it.CANCELING:return ut.RUNNING;case it.PAUSED:return ut.PAUSED;case it.SUCCESS:return ut.SUCCESS;case it.CANCELED:return ut.CANCELED;case it.ERROR:default:return ut.ERROR}}function st(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function ct(n,t){for(var e in n)st(n,e)&&t(e,n[e])}function ht(n){if(null==n)return{};var t={};return ct(n,function(n,e){t[n]=e}),t}function pt(n){return new Promise(n)}function ft(n){return Promise.resolve(n)}function dt(n){return null!=n}function bt(n){return void 0!==n}function gt(n){return"function"==typeof n}function vt(n){return"object"==typeof n}function mt(n){return vt(n)&&null!==n}function _t(n){return"string"==typeof n||n instanceof String}function yt(n){return wt(n)&&Number.isInteger(n)}function wt(n){return"number"==typeof n||n instanceof Number}function Et(n){return St()&&n instanceof Blob}function St(){return"undefined"!=typeof Blob}var Ct=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}({}),Ot=function(){function n(){var n=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ct.NO_ERROR,this.sendPromise_=pt(function(t,e){n.xhr_.addEventListener("abort",function(e){n.errorCode_=Ct.ABORT,t(n)}),n.xhr_.addEventListener("error",function(e){n.errorCode_=Ct.NETWORK_ERROR,t(n)}),n.xhr_.addEventListener("load",function(e){t(n)})})}return n.prototype.send=function(n,t,e,r){var l=this;if(this.sent_)throw Zn("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(t,n,!0),dt(r)&&ct(r,function(n,t){l.xhr_.setRequestHeader(n,t.toString())}),dt(e)?this.xhr_.send(e):this.xhr_.send(),this.sendPromise_},n.prototype.getErrorCode=function(){if(!this.sent_)throw Zn("cannot .getErrorCode() before sending");return this.errorCode_},n.prototype.getStatus=function(){if(!this.sent_)throw Zn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(n){return-1}},n.prototype.getResponseText=function(){if(!this.sent_)throw Zn("cannot .getResponseText() before sending");return this.xhr_.responseText},n.prototype.abort=function(){this.xhr_.abort()},n.prototype.getResponseHeader=function(n){return this.xhr_.getResponseHeader(n)},n.prototype.addUploadProgressListener=function(n){dt(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",n)},n.prototype.removeUploadProgressListener=function(n){dt(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",n)},n}(),Rt=function(){function n(){}return n.prototype.createXhrIo=function(){return new Ot},n}();function kt(n){var t,e;try{t=JSON.parse(n)}catch(r){return null}return vt(e=t)&&!Array.isArray(e)?t:null}var xt=function(){function n(n,t){this.bucket=n,this.path_=t}return Object.defineProperty(n.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),n.prototype.fullServerUrl=function(){var n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)},n.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},n.makeFromBucketSpec=function(t){var e;try{e=n.makeFromUrl(t)}catch(r){return new n(t,"")}if(""===e.path)return e;throw new zn(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},n.makeFromUrl=function(t){for(var e=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),l=jn.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(n){"/"===n.path.charAt(n.path.length-1)&&(n.path_=n.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+l+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(n){n.path_=decodeURIComponent(n.path)}}],i=0;i<o.length;i++){var u=o[i],a=u.regex.exec(t);if(a){var s=a[u.indices.path];s||(s=""),e=new n(a[u.indices.bucket],s),u.postModify(e);break}}if(null==e)throw function(n){return new zn(qn.INVALID_URL,"Invalid URL '"+n+"'.")}(t);return e},n}();function At(n){var t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function Tt(n){return"https://"+jn+"/v0"+n}function It(n){var t=encodeURIComponent,e="?";return ct(n,function(n,r){var l=t(n)+"="+t(r.toString());e=e+l+"&"}),e=e.slice(0,-1)}function Nt(n,t){return t}var Pt=function(){return function(n,t,e,r){this.server=n,this.local=t||n,this.writable=!!e,this.xform=r||Nt}}(),Dt=null;function Ut(n,t,e){var r=kt(t);return null===r?null:function(n,t,e){for(var r={type:"file"},l=e.length,o=0;o<l;o++){var i=e[o];r[i.local]=i.xform(r,t[i.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){var e=new xt(n.bucket,n.fullPath);return t.makeStorageReference(e)}})}(r,n),r}(n,r,e)}function Lt(n,t){for(var e={},r=t.length,l=0;l<r;l++){var o=t[l];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}function jt(n){if(!n||!vt(n))throw"Expected Metadata object.";for(var t in n){var e=n[t];if("customMetadata"===t){if(!vt(e))throw"Expected object for 'customMetadata' mapping."}else if(mt(e))throw"Mapping for '"+t+"' cannot be an object."}}var Mt="maxResults",Ft=1e3,Bt="pageToken",Vt="prefixes",zt="items";function qt(n){if(!n||!vt(n))throw"Expected ListOptions object.";for(var t in n)if(t===Mt){if(!yt(n[Mt])||n[Mt]<=0)throw"Expected maxResults to be a positive number.";if(n[Mt]>1e3)throw"Expected maxResults to be less than or equal to "+Ft+"."}else{if(t!==Bt)throw"Unknown option: "+t;if(n[Bt]&&!_t(n[Bt]))throw"Expected pageToken to be string."}}function Wt(n,t,e){for(var r=t.length,l=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var i,u,a,s;if(!(r<=e.length&&e.length<=l))throw(i=r)===(u=l)?(a=i,s=1===i?"argument":"arguments"):(a="between "+i+" and "+u,s="arguments"),new zn(qn.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+a+" "+s+", received "+e.length+".");for(o=0;o<e.length;o++)try{t[o].validator(e[o])}catch(c){throw c instanceof Error?Kn(o,n,c.message):Kn(o,n,c)}}var $t=function(){return function(n,t){var e=this;this.validator=function(t){e.optional&&!bt(t)||n(t)},this.optional=!!t}}();function Gt(n,t){function e(n){if(!_t(n))throw"Expected string."}var r,l,o;return n?(l=e,o=n,r=function(n){l(n),o(n)}):r=e,new $t(r,t)}function Ht(n){return new $t(jt,n)}function Kt(){return new $t(function(n){if(!(wt(n)&&n>=0))throw"Expected a number 0 or greater."})}function Jt(n,t){return new $t(function(t){if(!(null===t||dt(t)&&t instanceof Object))throw"Expected an Object.";null!=n&&n(t)},t)}function Xt(n){return new $t(function(n){if(null!==n&&!gt(n))throw"Expected a Function."},n)}function Zt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var Yt=function(){function n(n,t){var e=0,r="";Et(n)?(this.data_=n,e=n.size,r=n.type):n instanceof ArrayBuffer?(t?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),e=this.data_.length):n instanceof Uint8Array&&(t?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),e=n.length),this.size_=e,this.type_=r}return n.prototype.size=function(){return this.size_},n.prototype.type=function(){return this.type_},n.prototype.slice=function(t,e){if(Et(this.data_)){var r=(o=t,i=e,(l=this.data_).webkitSlice?l.webkitSlice(o,i):l.mozSlice?l.mozSlice(o,i):l.slice?l.slice(o,i):null);return null===r?null:new n(r)}var l,o,i;return new n(new Uint8Array(this.data_.buffer,t,e-t),!0)},n.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(St()){var r=t.map(function(t){return t instanceof n?t.data_:t});return new n((function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Zt();if(void 0!==e){for(var r=new e,l=0;l<n.length;l++)r.append(n[l]);return r.getBlob()}if(St())return new Blob(n);throw Error("This browser doesn't seem to support creating Blobs")}).apply(null,r))}var l=t.map(function(n){return _t(n)?tt(Yn.RAW,n).data:n.data_}),o=0;l.forEach(function(n){o+=n.byteLength});var i=new Uint8Array(o),u=0;return l.forEach(function(n){for(var t=0;t<n.length;t++)i[u++]=n[t]}),new n(i,!0)},n.prototype.uploadData=function(){return this.data_},n}();function Qt(n,t){return-1!==n.indexOf(t)}var ne=function(){return function(n,t,e,r){this.url=n,this.method=t,this.handler=e,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function te(n){if(!n)throw $n()}function ee(n,t){return function(e,r){var l=Ut(n,r,t);return te(null!==l),l}}function re(n){return function(t,e){var r;return(r=401===t.getStatus()?new zn(qn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new zn(qn.QUOTA_EXCEEDED,"Quota for bucket '"+n.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new zn(qn.UNAUTHORIZED,"User does not have permission to access '"+n.path+"'."):e).setServerResponseProp(e.serverResponseProp()),r}}function le(n){var t=re(n);return function(e,r){var l=t(e,r);return 404===e.getStatus()&&(l=new zn(qn.OBJECT_NOT_FOUND,"Object '"+n.path+"' does not exist.")),l.setServerResponseProp(r.serverResponseProp()),l}}function oe(n,t,e){var r=Tt(t.fullServerUrl()),l=n.maxOperationRetryTime(),o=new ne(r,"GET",ee(n,e),l);return o.errorHandler=le(t),o}function ie(n,t,e){var r=ht(e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var ue=function(){return function(n,t,e,r){this.current=n,this.total=t,this.finalized=!!e,this.metadata=r||null}}();function ae(n,t){var e;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){te(!1)}return te(Qt(t||["active"],e)),e}var se=function(){return function(n,t,e){if(gt(n)||dt(t)||dt(e))this.next=n,this.error=t||null,this.complete=e||null;else{var r=n;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),ce=function(){return function(n,t,e,r,l,o){this.bytesTransferred=n,this.totalBytes=t,this.state=e,this.metadata=r,this.task=l,this.ref=o}}();function he(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ft(!0).then(function(){n.apply(null,t)})}}var pe=function(){function n(n,t,e,r,l,o){var i=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=n,this.authWrapper_=t,this.location_=e,this.blob_=l,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=it.RUNNING,this.errorHandler_=function(n){i.request_=null,i.chunkMultiplier_=1,n.codeEquals(qn.CANCELED)?(i.needToFetchStatus_=!0,i.completeTransitions_()):(i.error_=n,i.transition_(it.ERROR))},this.metadataErrorHandler_=function(n){i.request_=null,n.codeEquals(qn.CANCELED)?i.completeTransitions_():(i.error_=n,i.transition_(it.ERROR))},this.promise_=pt(function(n,t){i.resolve_=n,i.reject_=t,i.start_()}),this.promise_.then(null,function(){})}return n.prototype.makeProgressCallback_=function(){var n=this,t=this.transferred_;return function(e,r){n.updateProgress_(t+e)}},n.prototype.shouldDoResumable_=function(n){return n.size()>262144},n.prototype.start_=function(){this.state_===it.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},n.prototype.resolveToken_=function(n){var t=this;this.authWrapper_.getAuthToken().then(function(e){switch(t.state_){case it.RUNNING:n(e);break;case it.CANCELING:t.transition_(it.CANCELED);break;case it.PAUSING:t.transition_(it.PAUSED)}})},n.prototype.createResumable_=function(){var n=this;this.resolveToken_(function(t){var e=function(n,t,e,r,l){var o=t.bucketOnlyServerUrl(),i=ie(t,r,l),u={name:i.fullPath},a=Tt(o),s={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},c=Lt(i,e),h=n.maxUploadRetryTime(),p=new ne(a,"POST",function(n,t){var e;ae(n);try{e=n.getResponseHeader("X-Goog-Upload-URL")}catch(r){te(!1)}return te(_t(e)),e},h);return p.urlParams=u,p.headers=s,p.body=c,p.errorHandler=re(t),p}(n.authWrapper_,n.location_,n.mappings_,n.blob_,n.metadata_),r=n.authWrapper_.makeRequest(e,t);n.request_=r,r.getPromise().then(function(t){n.request_=null,n.uploadUrl_=t,n.needToFetchStatus_=!1,n.completeTransitions_()},n.errorHandler_)})},n.prototype.fetchStatus_=function(){var n=this,t=this.uploadUrl_;this.resolveToken_(function(e){var r=function(t,e,r,l){var o=n.authWrapper_.maxUploadRetryTime(),i=new ne(r,"POST",function(n,t){var e=ae(n,["active","final"]),r=null;try{r=n.getResponseHeader("X-Goog-Upload-Size-Received")}catch(i){te(!1)}var o=parseInt(r,10);return te(!isNaN(o)),new ue(o,l.size(),"final"===e)},o);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=re(e),i}(0,n.location_,t,n.blob_),l=n.authWrapper_.makeRequest(r,e);n.request_=l,l.getPromise().then(function(t){t=t,n.request_=null,n.updateProgress_(t.current),n.needToFetchStatus_=!1,t.finalized&&(n.needToFetchMetadata_=!0),n.completeTransitions_()},n.errorHandler_)})},n.prototype.continueUpload_=function(){var n=this,t=262144*this.chunkMultiplier_,e=new ue(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(l){var o;try{o=function(n,t,e,r,l,o,i,u){var a=new ue(0,0);if(i?(a.current=i.current,a.total=i.total):(a.current=0,a.total=r.size()),r.size()!==a.total)throw new zn(qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var s=a.total-a.current,c=s;l>0&&(c=Math.min(c,l));var h=a.current,p={"X-Goog-Upload-Command":c===s?"upload, finalize":"upload","X-Goog-Upload-Offset":a.current},f=r.slice(h,h+c);if(null===f)throw Hn();var d=t.maxUploadRetryTime(),b=new ne(e,"POST",function(n,e){var l,i=ae(n,["active","final"]),u=a.current+c,s=r.size();return l="final"===i?ee(t,o)(n,e):null,new ue(u,s,"final"===i,l)},d);return b.headers=p,b.body=f.uploadData(),b.progressCallback=u||null,b.errorHandler=re(n),b}(n.location_,n.authWrapper_,r,n.blob_,t,n.mappings_,e,n.makeProgressCallback_())}catch(u){return n.error_=u,void n.transition_(it.ERROR)}var i=n.authWrapper_.makeRequest(o,l);n.request_=i,i.getPromise().then(function(t){n.increaseMultiplier_(),n.request_=null,n.updateProgress_(t.current),t.finalized?(n.metadata_=t.metadata,n.transition_(it.SUCCESS)):n.completeTransitions_()},n.errorHandler_)})},n.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},n.prototype.fetchMetadata_=function(){var n=this;this.resolveToken_(function(t){var e=oe(n.authWrapper_,n.location_,n.mappings_),r=n.authWrapper_.makeRequest(e,t);n.request_=r,r.getPromise().then(function(t){n.request_=null,n.metadata_=t,n.transition_(it.SUCCESS)},n.metadataErrorHandler_)})},n.prototype.oneShotUpload_=function(){var n=this;this.resolveToken_(function(t){var e=function(n,t,e,r,l){var o=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"},u=function(){for(var n="",t=0;t<2;t++)n+=Math.random().toString().slice(2);return n}();i["Content-Type"]="multipart/related; boundary="+u;var a=ie(t,r,l),s=Lt(a,e),c=Yt.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+s+"\r\n--"+u+"\r\nContent-Type: "+a.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===c)throw Hn();var h={name:a.fullPath},p=Tt(o),f=n.maxUploadRetryTime(),d=new ne(p,"POST",ee(n,e),f);return d.urlParams=h,d.headers=i,d.body=c.uploadData(),d.errorHandler=re(t),d}(n.authWrapper_,n.location_,n.mappings_,n.blob_,n.metadata_),r=n.authWrapper_.makeRequest(e,t);n.request_=r,r.getPromise().then(function(t){n.request_=null,n.metadata_=t,n.updateProgress_(n.blob_.size()),n.transition_(it.SUCCESS)},n.errorHandler_)})},n.prototype.updateProgress_=function(n){var t=this.transferred_;this.transferred_=n,this.transferred_!==t&&this.notifyObservers_()},n.prototype.transition_=function(n){if(this.state_!==n)switch(n){case it.CANCELING:case it.PAUSING:this.state_=n,null!==this.request_&&this.request_.cancel();break;case it.RUNNING:var t=this.state_===it.PAUSED;this.state_=n,t&&(this.notifyObservers_(),this.start_());break;case it.PAUSED:this.state_=n,this.notifyObservers_();break;case it.CANCELED:this.error_=Gn(),this.state_=n,this.notifyObservers_();break;case it.ERROR:case it.SUCCESS:this.state_=n,this.notifyObservers_()}},n.prototype.completeTransitions_=function(){switch(this.state_){case it.PAUSING:this.transition_(it.PAUSED);break;case it.CANCELING:this.transition_(it.CANCELED);break;case it.RUNNING:this.start_()}},Object.defineProperty(n.prototype,"snapshot",{get:function(){var n=at(this.state_);return new ce(this.transferred_,this.blob_.size(),n,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),n.prototype.on=function(n,t,e,r){var l="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=Xt(!0).validator,i=Jt(null,!0).validator;function u(n){try{return void o(n)}catch(t){}try{if(i(n),!(bt(n.next)||bt(n.error)||bt(n.complete)))throw"";return}catch(t){throw l}}Wt("on",[Gt(function(t){if(n!==ot.STATE_CHANGED)throw"Expected one of the event types: ["+ot.STATE_CHANGED+"]."}),Jt(u,!0),Xt(!0),Xt(!0)],arguments);var a=this;function s(n){return function(t,e,l){null!==n&&Wt("on",n,arguments);var o=new se(t,e,r);return a.addObserver_(o),function(){a.removeObserver_(o)}}}var c=[Jt(function(n){if(null===n)throw l;u(n)}),Xt(!0),Xt(!0)];return bt(t)||bt(e)||bt(r)?s(null)(t,e,r):s(c)},n.prototype.then=function(n,t){return this.promise_.then(n,t)},n.prototype.catch=function(n){return this.then(null,n)},n.prototype.addObserver_=function(n){this.observers_.push(n),this.notifyObserver_(n)},n.prototype.removeObserver_=function(n){var t,e;-1!==(e=(t=this.observers_).indexOf(n))&&t.splice(e,1)},n.prototype.notifyObservers_=function(){var n=this;this.finishPromise_(),Array.prototype.slice.call(this.observers_).forEach(function(t){n.notifyObserver_(t)})},n.prototype.finishPromise_=function(){if(null!==this.resolve_){var n=!0;switch(at(this.state_)){case ut.SUCCESS:he(this.resolve_.bind(null,this.snapshot))();break;case ut.CANCELED:case ut.ERROR:he(this.reject_.bind(null,this.error_))();break;default:n=!1}n&&(this.resolve_=null,this.reject_=null)}},n.prototype.notifyObserver_=function(n){switch(at(this.state_)){case ut.RUNNING:case ut.PAUSED:n.next&&he(n.next.bind(n,this.snapshot))();break;case ut.SUCCESS:n.complete&&he(n.complete.bind(n))();break;case ut.CANCELED:case ut.ERROR:n.error&&he(n.error.bind(n,this.error_))();break;default:n.error&&he(n.error.bind(n,this.error_))()}},n.prototype.resume=function(){Wt("resume",[],arguments);var n=this.state_===it.PAUSED||this.state_===it.PAUSING;return n&&this.transition_(it.RUNNING),n},n.prototype.pause=function(){Wt("pause",[],arguments);var n=this.state_===it.RUNNING;return n&&this.transition_(it.PAUSING),n},n.prototype.cancel=function(){Wt("cancel",[],arguments);var n=this.state_===it.RUNNING||this.state_===it.PAUSING;return n&&this.transition_(it.CANCELING),n},n}(),fe=function(){function n(n,t){this.authWrapper=n,this.location=t instanceof xt?t:xt.makeFromUrl(t)}return n.prototype.toString=function(){return Wt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},n.prototype.newRef=function(t,e){return new n(t,e)},n.prototype.mappings=function(){return function(){if(Dt)return Dt;var n=[];n.push(new Pt("bucket")),n.push(new Pt("generation")),n.push(new Pt("metageneration")),n.push(new Pt("name","fullPath",!0));var t=new Pt("name");t.xform=function(n,t){return function(n){return!_t(n)||n.length<2?n:At(n=n)}(t)},n.push(t);var e=new Pt("size");return e.xform=function(n,t){return dt(t)?+t:t},n.push(e),n.push(new Pt("timeCreated")),n.push(new Pt("updated")),n.push(new Pt("md5Hash",null,!0)),n.push(new Pt("cacheControl",null,!0)),n.push(new Pt("contentDisposition",null,!0)),n.push(new Pt("contentEncoding",null,!0)),n.push(new Pt("contentLanguage",null,!0)),n.push(new Pt("contentType",null,!0)),n.push(new Pt("metadata","customMetadata",!0)),Dt=n}()},n.prototype.child=function(n){Wt("child",[Gt()],arguments);var t=function(n,t){var e=t.split("/").filter(function(n){return n.length>0}).join("/");return 0===n.length?e:n+"/"+e}(this.location.path,n),e=new xt(this.location.bucket,t);return this.newRef(this.authWrapper,e)},Object.defineProperty(n.prototype,"parent",{get:function(){var n=function(n){if(0==n.length)return null;var t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this.location.path);if(null===n)return null;var t=new xt(this.location.bucket,n);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var n=new xt(this.location.bucket,"");return this.newRef(this.authWrapper,n)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return At(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),n.prototype.put=function(n,t){return void 0===t&&(t=null),Wt("put",[new $t(function(n){if(!(n instanceof Uint8Array||n instanceof ArrayBuffer||St()&&n instanceof Blob))throw"Expected Blob or File."}),Ht(!0)],arguments),this.throwIfRoot_("put"),new pe(this,this.authWrapper,this.location,this.mappings(),new Yt(n),t)},n.prototype.putString=function(n,t,e){void 0===t&&(t=Yn.RAW),Wt("putString",[Gt(),Gt(Qn,!0),Ht(!0)],arguments),this.throwIfRoot_("putString");var r=tt(t,n),l=ht(e);return!dt(l.contentType)&&dt(r.contentType)&&(l.contentType=r.contentType),new pe(this,this.authWrapper,this.location,this.mappings(),new Yt(r.data,!0),l)},n.prototype.delete=function(){Wt("delete",[],arguments),this.throwIfRoot_("delete");var n=this;return this.authWrapper.getAuthToken().then(function(t){var e=function(n,t){var e=Tt(t.fullServerUrl()),r=n.maxOperationRetryTime(),l=new ne(e,"DELETE",function(n,t){},r);return l.successCodes=[200,204],l.errorHandler=le(t),l}(n.authWrapper,n.location);return n.authWrapper.makeRequest(e,t).getPromise()})},n.prototype.listAll=function(){Wt("listAll",[],arguments);var n={prefixes:[],items:[]};return this.listAllHelper(n).then(function(){return n})},n.prototype.listAllHelper=function(n,t){return e=this,l=function(){var e,r,l;return function(n,t){var e,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;switch(r=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1],l=o;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(o);break}l[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(n,i)}catch(u){o=[6,u],r=0}finally{e=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,function(o){switch(o.label){case 0:return[4,this.list({pageToken:t})];case 1:return l=o.sent(),(e=n.prefixes).push.apply(e,l.prefixes),(r=n.items).push.apply(r,l.items),null==l.nextPageToken?[3,3]:[4,this.listAllHelper(n,l.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}})},new((r=void 0)||(r=Promise))(function(n,t){function o(n){try{u(l.next(n))}catch(e){t(e)}}function i(n){try{u(l.throw(n))}catch(e){t(e)}}function u(t){t.done?n(t.value):new r(function(n){n(t.value)}).then(o,i)}u((l=l.apply(e,[])).next())});var e,r,l},n.prototype.list=function(n){Wt("list",[new $t(qt,!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(e){var r=n||{},l=function(n,t,e,r,l){var o={};o.prefix=t.isRoot?"":t.path+"/","/".length>0&&(o.delimiter="/"),r&&(o.pageToken=r),l&&(o.maxResults=l);var i=Tt(t.bucketOnlyServerUrl()),u=n.maxOperationRetryTime(),a=new ne(i,"GET",function(n){return function(t,e){var r=function(n,t){var r=kt(e);return null===r?null:function(n,t){var e={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=n.bucket();if(null===r)throw new zn(qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Mn+"' property when initializing the app?");if(t[Vt])for(var l=0,o=t[Vt];l<o.length;l++){var i=o[l].replace(/\/$/,""),u=n.makeStorageReference(new xt(r,i));e.prefixes.push(u)}if(t[zt])for(var a=0,s=t[zt];a<s.length;a++)u=n.makeStorageReference(new xt(r,s[a].name)),e.items.push(u);return e}(n,r)}(n);return te(null!==r),r}}(n),u);return a.urlParams=o,a.errorHandler=re(t),a}(t.authWrapper,t.location,0,r.pageToken,r.maxResults);return t.authWrapper.makeRequest(l,e).getPromise()})},n.prototype.getMetadata=function(){Wt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var n=this;return this.authWrapper.getAuthToken().then(function(t){var e=oe(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},n.prototype.updateMetadata=function(n){Wt("updateMetadata",[Ht()],arguments),this.throwIfRoot_("updateMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var r=function(n,t,e,r){var l=Tt(t.fullServerUrl()),o=Lt(e,r),i=n.maxOperationRetryTime(),u=new ne(l,"PATCH",ee(n,r),i);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=o,u.errorHandler=le(t),u}(t.authWrapper,t.location,n,t.mappings());return t.authWrapper.makeRequest(r,e).getPromise()})},n.prototype.getDownloadURL=function(){Wt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var n=this;return this.authWrapper.getAuthToken().then(function(t){var e=function(n,t,e){var r=Tt(t.fullServerUrl()),l=n.maxOperationRetryTime(),o=new ne(r,"GET",function(n,t){return function(e,r){var l=Ut(n,r,t);return te(null!==l),function(n,t){var e=kt(r);if(null===e)return null;if(!_t(e.downloadTokens))return null;var l=e.downloadTokens;if(0===l.length)return null;var o=encodeURIComponent;return l.split(",").map(function(t){var e=n.fullPath;return Tt("/b/"+o(n.bucket)+"/o/"+o(e))+It({alt:"media",token:t})})[0]}(l)}}(n,e),l);return o.errorHandler=le(t),o}(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise().then(function(n){if(null===n)throw new zn(qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return n})})},n.prototype.throwIfRoot_=function(n){if(""===this.location.path)throw function(n){return new zn(qn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(n)},n}(),de=function(){function n(n){this.promise_=function(n){return Promise.reject(n)}(n)}return n.prototype.getPromise=function(){return this.promise_},n.prototype.cancel=function(n){void 0===n&&(n=!1)},n}(),be=function(){function n(){this.map_={},this.id_=Vn}return n.prototype.addRequest=function(n){var t=this.id_;this.id_++,this.map_[t]=n;var e=this;function r(){delete e.map_[t]}n.getPromise().then(r,r)},n.prototype.clear=function(){ct(this.map_,function(n,t){t&&t.cancel(!0)}),this.map_={}},n}(),ge=function(){function n(t,e,r,l,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var i=this.app_.options;dt(i)&&(this.bucket_=n.extractBucket_(i))}this.storageRefMaker_=e,this.requestMaker_=r,this.pool_=o,this.service_=l,this.maxOperationRetryTime_=Fn,this.maxUploadRetryTime_=Bn,this.requestMap_=new be}return n.extractBucket_=function(n){var t=n[Mn]||null;return null==t?null:xt.makeFromBucketSpec(t).bucket},n.prototype.getAuthToken=function(){return null!==this.app_&&dt(this.app_.INTERNAL)&&dt(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(n){return null!==n?n.accessToken:null},function(n){return null}):ft(null)},n.prototype.bucket=function(){if(this.deleted_)throw Jn();return this.bucket_},n.prototype.service=function(){return this.service_},n.prototype.makeStorageReference=function(n){return this.storageRefMaker_(this,n)},n.prototype.makeRequest=function(n,t){if(this.deleted_)return new de(Jn());var e=this.requestMaker_(n,t,this.pool_);return this.requestMap_.addRequest(e),e},n.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},n.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},n.prototype.setMaxUploadRetryTime=function(n){this.maxUploadRetryTime_=n},n.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},n.prototype.setMaxOperationRetryTime=function(n){this.maxOperationRetryTime_=n},n}(),ve=function(){function n(n,t,e,r,l,o,i,u,a,s,c){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=n,this.method_=t,this.headers_=e,this.body_=r,this.successCodes_=l.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=i,this.errorCallback_=u,this.progressCallback_=s,this.timeout_=a,this.pool_=c;var h=this;this.promise_=pt(function(n,t){h.resolve_=n,h.reject_=t,h.start_()})}return n.prototype.start_=function(){var n=this;function t(t,e){var r,l=n.resolve_,o=n.reject_,i=e.xhr;if(e.wasSuccessCode)try{var u=n.callback_(i,i.getResponseText());bt(u)?l(u):l()}catch(a){o(a)}else null!==i?((r=$n()).setServerResponseProp(i.getResponseText()),o(n.errorCallback_?n.errorCallback_(i,r):r)):o(r=e.canceled?n.appDelete_?Jn():Gn():new zn(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new me(!1,null,!0)):this.backoffId_=function(n,t,e){var r=1,l=null,o=!1,i=0;function u(){return 2===i}var a=!1;function s(){a||(a=!0,t.apply(null,arguments))}function c(t){l=setTimeout(function(){l=null,n(h,u())},t)}function h(n){for(var t,e=[],l=1;l<arguments.length;l++)e[l-1]=arguments[l];a||(n?s.apply(null,arguments):u()||o?s.apply(null,arguments):(r<64&&(r*=2),1===i?(i=2,t=0):t=1e3*(r+Math.random()),c(t)))}var p=!1;function f(n){p||(p=!0,a||(null!==l?(n||(i=2),clearTimeout(l),c(0)):n||(i=1)))}return c(0),setTimeout(function(){o=!0,f(!0)},e),f}(function(t,e){if(e)t(!1,new me(!1,null,!0));else{var r=n.pool_.createXhrIo();n.pendingXhr_=r,null!==n.progressCallback_&&r.addUploadProgressListener(l),r.send(n.url_,n.method_,n.body_,n.headers_).then(function(e){null!==n.progressCallback_&&e.removeUploadProgressListener(l),n.pendingXhr_=null;var r=(e=e).getErrorCode()===Ct.NO_ERROR,o=e.getStatus();if(r&&!n.isRetryStatusCode_(o)){var i=Qt(n.successCodes_,o);t(!0,new me(i,e))}else{var u=e.getErrorCode()===Ct.ABORT;t(!1,new me(!1,null,u))}})}function l(t){null!==n.progressCallback_&&n.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}},t,this.timeout_)},n.prototype.getPromise=function(){return this.promise_},n.prototype.cancel=function(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},n.prototype.isRetryStatusCode_=function(n){var t=n>=500&&n<600,e=Qt([408,429],n),r=Qt(this.additionalRetryCodes_,n);return t||e||r},n}(),me=function(){return function(n,t,e){this.wasSuccessCode=n,this.xhr=t,this.canceled=!!e}}();function _e(n,t,e){var r=It(n.urlParams),l=n.url+r,o=ht(n.headers);return function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(o,t),function(n){n["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Ln.a?Ln.a.SDK_VERSION:"AppManager")}(o),new ve(l,n.method,o,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,e)}var ye=function(){function n(n,t,e){if(this.bucket_=null,this.authWrapper_=new ge(n,function(n,t){return new fe(n,t)},_e,this,t),this.app_=n,null!=e)this.bucket_=xt.makeFromBucketSpec(e);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new xt(r,""))}this.internals_=new we(this)}return n.prototype.ref=function(n){if(Wt("ref",[Gt(function(n){if(/^[A-Za-z]+:\/\//.test(n))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new fe(this.authWrapper_,this.bucket_);return null!=n?t.child(n):t},n.prototype.refFromURL=function(n){return Wt("refFromURL",[Gt(function(n){if(!/^[A-Za-z]+:\/\//.test(n))throw"Expected full URL but got a child path, use ref instead.";try{xt.makeFromUrl(n)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new fe(this.authWrapper_,n)},Object.defineProperty(n.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),n.prototype.setMaxUploadRetryTime=function(n){Wt("setMaxUploadRetryTime",[Kt()],arguments),this.authWrapper_.setMaxUploadRetryTime(n)},n.prototype.setMaxOperationRetryTime=function(n){Wt("setMaxOperationRetryTime",[Kt()],arguments),this.authWrapper_.setMaxOperationRetryTime(n)},Object.defineProperty(n.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),n}(),we=function(){function n(n){this.service_=n}return n.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),ft(void 0)},n}();Ln.a.INTERNAL.registerService("storage",function(n,t,e){return new ye(n,new Rt,e)},{TaskState:ut,TaskEvent:ot,StringFormat:Yn,Storage:ye,Reference:fe},void 0,!0);const Ee=(()=>(class{}))();var Se=e("PCNd");class Ce{}e.d(t,"ContactsModuleNgFactory",function(){return Oe});var Oe=r.kb(o,[],function(n){return r.tb([r.ub(512,r.j,r.X,[[8,[i.a,w,T,fn,wn,Pn]],[3,r.j],r.v]),r.ub(4608,a.m,a.l,[r.s,[2,a.u]]),r.ub(4608,Dn.j,Dn.p,[a.d,r.z,Dn.n]),r.ub(4608,Dn.q,Dn.q,[Dn.j,Dn.o]),r.ub(5120,Dn.a,function(n){return[n]},[Dn.q]),r.ub(4608,Dn.m,Dn.m,[]),r.ub(6144,Dn.k,null,[Dn.m]),r.ub(4608,Dn.i,Dn.i,[Dn.k]),r.ub(6144,Dn.b,null,[Dn.i]),r.ub(4608,Dn.f,Dn.l,[Dn.b,r.p]),r.ub(4608,Dn.c,Dn.c,[Dn.f]),r.ub(4608,E.d,E.d,[]),r.ub(4608,E.p,E.p,[]),r.ub(5120,Z,Y,[J,[2,X]]),r.ub(4608,tn,tn,[J,[2,X],[2,nn],r.z,r.x]),r.ub(4608,g,g,[b.a,u.o]),r.ub(1073742336,a.c,a.c,[]),r.ub(1073742336,Dn.e,Dn.e,[]),r.ub(1073742336,Dn.d,Dn.d,[]),r.ub(1073742336,E.o,E.o,[]),r.ub(1073742336,E.m,E.m,[]),r.ub(1073742336,E.g,E.g,[]),r.ub(1073742336,u.q,u.q,[[2,u.v],[2,u.o]]),r.ub(1073742336,Se.a,Se.a,[]),r.ub(1073742336,Ce,Ce,[]),r.ub(1073742336,Q,Q,[]),r.ub(1073742336,Ee,Ee,[]),r.ub(1073742336,o,o,[]),r.ub(256,Dn.n,"XSRF-TOKEN",[]),r.ub(256,Dn.o,"X-XSRF-TOKEN",[]),r.ub(1024,u.m,function(){return[[{path:"",component:v,children:[{path:"",component:S},{path:"new",component:en},{path:":id",component:dn},{path:":id/edit",component:Sn}]}]]},[]),r.ub(256,J,{apiKey:"AIzaSyCuSRroU3vGqVS0PjAdkr67aheIQMmptB8",authDomain:"ng-phonebook-58f04.firebaseapp.com",databaseURL:"https://ng-phonebook-58f04.firebaseio.com",projectId:"ng-phonebook-58f04",storageBucket:"",messagingSenderId:"870796540855",appId:"1:870796540855:web:591e3635f2ffddc4"},[]),r.ub(256,X,void 0,[]),r.ub(256,nn,l,[])])})},Wcq6:function(n,t,e){"use strict";var r,l=(r=e("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n.exports=l},"q/0M":function(n,t,e){"use strict";e.r(t),e.d(t,"LogLevel",function(){return l}),e.d(t,"Logger",function(){return u}),e.d(t,"setLogLevel",function(){return a});var r=[],l=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}({}),o=l.INFO,i=function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];if(!(t<n.logLevel)){var o=(new Date).toISOString();switch(t){case l.DEBUG:case l.VERBOSE:console.log.apply(console,["["+o+"]  "+n.name+":"].concat(e));break;case l.INFO:console.info.apply(console,["["+o+"]  "+n.name+":"].concat(e));break;case l.WARN:console.warn.apply(console,["["+o+"]  "+n.name+":"].concat(e));break;case l.ERROR:console.error.apply(console,["["+o+"]  "+n.name+":"].concat(e));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function n(n){this.name=n,this._logLevel=o,this._logHandler=i,r.push(this)}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(n){if(!(n in l))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"logHandler",{get:function(){return this._logHandler},set:function(n){if("function"!=typeof n)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n},enumerable:!0,configurable:!0}),n.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,l.DEBUG].concat(n))},n.prototype.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,l.VERBOSE].concat(n))},n.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,l.INFO].concat(n))},n.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,l.WARN].concat(n))},n.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this._logHandler.apply(this,[this,l.ERROR].concat(n))},n}();function a(n){r.forEach(function(t){t.logLevel=n})}},wj3C:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,l=e("30Go"),o=e("zVF4"),i=e("q/0M"),u=((r={})["no-app"]="No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$name}",r["duplicate-app"]="Firebase App named '{$name}' already exists",r["app-deleted"]="Firebase App named '{$name}' already deleted",r["duplicate-service"]="Firebase service named '{$name}' already registered",r["invalid-app-argument"]="firebase.{$name}() takes either no argument or a Firebase App instance.",r),a=new o.ErrorFactory("app","Firebase",u),s="[DEFAULT]",c=[],h=function(){function n(n,t,e){this.firebase_=e,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(n),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(n){c.push(n),setTimeout(function(){return n(null)},0)},removeAuthTokenListener:function(n){c=c.filter(function(t){return t!==n})}}}return Object.defineProperty(n.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(n){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),n.prototype.delete=function(){var n=this;return new Promise(function(t){n.checkDestroyed_(),t()}).then(function(){n.firebase_.INTERNAL.removeApp(n.name_);for(var t=[],e=0,r=Object.keys(n.services_);e<r.length;e++)for(var l=r[e],o=0,i=Object.keys(n.services_[l]);o<i.length;o++)t.push(n.services_[l][i[o]]);return Promise.all(t.filter(function(n){return"INTERNAL"in n}).map(function(n){return n.INTERNAL.delete()}))}).then(function(){n.isDeleted_=!0,n.services_={}})},n.prototype._getService=function(n,t){if(void 0===t&&(t=s),this.checkDestroyed_(),this.services_[n]||(this.services_[n]={}),!this.services_[n][t]){var e=t!==s?t:void 0,r=this.firebase_.INTERNAL.factories[n](this,this.extendApp.bind(this),e);this.services_[n][t]=r}return this.services_[n][t]},n.prototype.extendApp=function(n){var t=this;o.deepExtend(this,n),n.INTERNAL&&n.INTERNAL.addAuthTokenListener&&(c.forEach(function(n){t.INTERNAL.addAuthTokenListener(n)}),c=[])},n.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw a.create("app-deleted",{name:this.name_})},n}();h.prototype.name&&h.prototype.options||h.prototype.delete||console.log("dc");var p=new i.Logger("@firebase/app");if(o.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var d=function n(){var t=function(n){var t={},e={},r={},l={__esModule:!0,initializeApp:function(e,r){void 0===r&&(r={}),("object"!=typeof r||null===r)&&(r={name:r});var i=r;void 0===i.name&&(i.name=s);var u=i.name;if("string"!=typeof u||!u)throw a.create("bad-app-name",{name:String(u)});if(o.contains(t,u))throw a.create("duplicate-app",{name:u});var h=new n(e,i,l);return t[u]=h,c(h,"create"),h},app:i,apps:null,SDK_VERSION:"6.2.3",INTERNAL:{registerService:function(t,s,c,h,p){if(void 0===p&&(p=!1),e[t])throw a.create("duplicate-service",{name:t});function f(n){if(void 0===n&&(n=i()),"function"!=typeof n[t])throw a.create("invalid-app-argument",{name:t});return n[t]()}return e[t]=s,h&&(r[t]=h,u().forEach(function(n){h("create",n)})),void 0!==c&&o.deepExtend(f,c),l[t]=f,n.prototype[t]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return this._getService.bind(this,t).apply(this,p?n:[])},f},removeApp:function(n){c(t[n],"delete"),delete t[n]},factories:e,useAsService:h}};function i(n){if(!o.contains(t,n=n||s))throw a.create("no-app",{name:n});return t[n]}function u(){return Object.keys(t).map(function(n){return t[n]})}function c(n,t){for(var l=0,o=Object.keys(e);l<o.length;l++){var i=h(0,o[l]);if(null===i)return;r[i]&&r[i](t,n)}}function h(n,t){return"serverAuth"===t?null:t}return l.default=l,Object.defineProperty(l,"apps",{get:u}),i.App=n,l}(h);return t.INTERNAL=l.__assign({},t.INTERNAL,{createFirebaseNamespace:n,extendNamespace:function(n){o.deepExtend(t,n)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),t}(),b=d.initializeApp;d.initializeApp=function(){return o.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\n      to false and "main" to true:\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,arguments)};var g=d;t.default=g,t.firebase=g},zVF4:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("+7AZ"),l={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(n,t){if(!n)throw i(t)},i=function(n){return new Error("Firebase Database ("+l.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)},u=function(n){for(var t=[],e=0,r=0;r<n.length;r++){var l=n.charCodeAt(r);l<128?t[e++]=l:l<2048?(t[e++]=l>>6|192,t[e++]=63&l|128):55296==(64512&l)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(l=65536+((1023&l)<<10)+(1023&n.charCodeAt(++r)),t[e++]=l>>18|240,t[e++]=l>>12&63|128,t[e++]=l>>6&63|128,t[e++]=63&l|128):(t[e++]=l>>12|224,t[e++]=l>>6&63|128,t[e++]=63&l|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],l=0;l<n.length;l+=3){var o=n[l],i=l+1<n.length,u=i?n[l+1]:0,a=l+2<n.length,s=a?n[l+2]:0,c=(15&u)<<2|s>>6,h=63&s;a||(h=64,i||(c=64)),r.push(e[o>>2],e[(3&o)<<4|u>>4],e[c],e[h])}return r.join("")},encodeString:function(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(u(n),t)},decodeString:function(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):function(n){for(var t=[],e=0,r=0;e<n.length;){var l=n[e++];if(l<128)t[r++]=String.fromCharCode(l);else if(l>191&&l<224){var o=n[e++];t[r++]=String.fromCharCode((31&l)<<6|63&o)}else if(l>239&&l<365){var i=((7&l)<<18|(63&(o=n[e++]))<<12|(63&(u=n[e++]))<<6|63&n[e++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{o=n[e++];var u=n[e++];t[r++]=String.fromCharCode((15&l)<<12|(63&o)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(n,t))},decodeStringToByteArray:function(n,t){this.init_();for(var e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],l=0;l<n.length;){var o=e[n.charAt(l++)],i=l<n.length?e[n.charAt(l)]:0,u=++l<n.length?e[n.charAt(l)]:64,a=++l<n.length?e[n.charAt(l)]:64;if(++l,null==o||null==i||null==u||null==a)throw Error();r.push(o<<2|i>>4),64!==u&&(r.push(i<<4&240|u>>2),64!==a&&r.push(u<<6&192|a))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},s=function(n){try{return a.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return t}for(var e in t)t.hasOwnProperty(e)&&(n[e]=c(n[e],t[e]));return n}var h=function(){function n(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return n.prototype.wrapCallback=function(n){var t=this;return function(e,r){e?t.reject(e):t.resolve(r),"function"==typeof n&&(t.promise.catch(function(){}),1===n.length?n(e):n(e,r))}},n}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f="FirebaseError",d=function(n){function t(e,r){var l=n.call(this,r)||this;return l.code=e,l.name=f,Object.setPrototypeOf(l,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(l,b.prototype.create),l}return r.__extends(t,n),t}(Error),b=function(){function n(n,t,e){this.service=n,this.serviceName=t,this.errors=e}return n.prototype.create=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var r=t[0]||{},l=this.service+"/"+n,o=this.errors[n],i=o?function(n,t){return n.replace(g,function(n,e){var r=t[e];return null!=r?r.toString():"<"+e+"?>"})}(o,r):"Error",u=new d(l,this.serviceName+": "+i+" ("+l+")."),a=0,s=Object.keys(r);a<s.length;a++){var c=s[a];"_"!==c.slice(-1)&&(c in u&&console.warn('Overwriting FirebaseError base field "'+c+'" can cause unexpected behavior.'),u[c]=r[c])}return u},n}(),g=/\{\$([^}]+)}/g;function v(n){return JSON.parse(n)}var m=function(n){var t={},e={},r={},l="";try{var o=n.split(".");t=v(s(o[0])||""),e=v(s(o[1])||""),l=o[2],r=e.d||{},delete e.d}catch(i){}return{header:t,claims:e,data:r,signature:l}},_=function(n,t){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])},y=function(n,t){return _(t,function(t,e){n[t]=e}),n},w=function(n,t,e){for(var r in n)if(t.call(e,n[r],r,n))return r},E=function(){function n(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}return n.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},n.prototype.compress_=function(n,t){t||(t=0);var e=this.W_;if("string"==typeof n)for(var r=0;r<16;r++)e[r]=n.charCodeAt(t)<<24|n.charCodeAt(t+1)<<16|n.charCodeAt(t+2)<<8|n.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)e[r]=n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3],t+=4;for(r=16;r<80;r++)e[r]=4294967295&((h=e[r-3]^e[r-8]^e[r-14]^e[r-16])<<1|h>>>31);var l,o,i=this.chain_[0],u=this.chain_[1],a=this.chain_[2],s=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(l=s^u&(a^s),o=1518500249):(l=u^a^s,o=1859775393):r<60?(l=u&a|s&(u|a),o=2400959708):(l=u^a^s,o=3395469782);var h=(i<<5|i>>>27)+l+c+o+e[r]&4294967295;c=s,s=a,a=4294967295&(u<<30|u>>>2),u=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+s&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},n.prototype.update=function(n,t){if(null!=n){void 0===t&&(t=n.length);for(var e=t-this.blockSize,r=0,l=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=e;)this.compress_(n,r),r+=this.blockSize;if("string"==typeof n){for(;r<t;)if(l[o]=n.charCodeAt(r),++r,++o===this.blockSize){this.compress_(l),o=0;break}}else for(;r<t;)if(l[o]=n[r],++r,++o===this.blockSize){this.compress_(l),o=0;break}}this.inbuf_=o,this.total_+=t}},n.prototype.digest=function(){var n=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(e=0;e<5;e++)for(var l=24;l>=0;l-=8)n[r]=this.chain_[e]>>l&255,++r;return n},n}(),S=function(){function n(n,t){var e=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){n(e)}).catch(function(n){e.error(n)})}return n.prototype.next=function(n){this.forEachObserver(function(t){t.next(n)})},n.prototype.error=function(n){this.forEachObserver(function(t){t.error(n)}),this.close(n)},n.prototype.complete=function(){this.forEachObserver(function(n){n.complete()}),this.close()},n.prototype.subscribe=function(n,t,e){var r,l=this;if(void 0===n&&void 0===t&&void 0===e)throw new Error("Missing Observer.");void 0===(r=function(n,t){if("object"!=typeof n||null===n)return!1;for(var e=0,r=["next","error","complete"];e<r.length;e++){var l=r[e];if(l in n&&"function"==typeof n[l])return!0}return!1}(n)?n:{next:n,error:t,complete:e}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{l.finalError?r.error(l.finalError):r.complete()}catch(n){}}),this.observers.push(r),o},n.prototype.unsubscribeOne=function(n){void 0!==this.observers&&void 0!==this.observers[n]&&(delete this.observers[n],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},n.prototype.forEachObserver=function(n){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,n)},n.prototype.sendOne=function(n,t){var e=this;this.task.then(function(){if(void 0!==e.observers&&void 0!==e.observers[n])try{t(e.observers[n])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},n.prototype.close=function(n){var t=this;this.finalized||(this.finalized=!0,void 0!==n&&(this.finalError=n),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},n}();function C(){}function O(n,t,e){var r="";switch(t){case 1:r=e?"first":"First";break;case 2:r=e?"second":"Second";break;case 3:r=e?"third":"Third";break;case 4:r=e?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return n+" failed: "+r+" argument "}t.CONSTANTS=l,t.Deferred=h,t.ErrorFactory=b,t.FirebaseError=d,t.Sha1=E,t.assert=o,t.assertionError=i,t.async=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];Promise.resolve(!0).then(function(){n.apply(void 0,e)}).catch(function(n){t&&t(n)})}},t.base64=a,t.base64Decode=s,t.base64Encode=function(n){var t=u(n);return a.encodeByteArray(t,!0)},t.clone=function(n){return y({},n)},t.contains=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.createSubscribe=function(n,t){var e=new S(n,t);return e.subscribe.bind(e)},t.decode=m,t.deepCopy=function(n){return c(void 0,n)},t.deepExtend=c,t.errorPrefix=O,t.every=function(n,t){for(var e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&!t(e,n[e]))return!1;return!0},t.extend=y,t.findKey=w,t.findValue=function(n,t,e){var r=w(n,t,e);return r&&n[r]},t.forEach=_,t.getAnyKey=function(n){for(var t in n)return t},t.getCount=function(n){var t=0;for(var e in n)t++;return t},t.getUA=p,t.getValues=function(n){var t=[],e=0;for(var r in n)t[e++]=n[r];return t},t.isAdmin=function(n){var t=m(n).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(n){for(var t in n)return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}},t.isNodeSdk=function(){return!0===l.NODE_CLIENT||!0===l.NODE_ADMIN},t.isNonNullObject=function(n){return"object"==typeof n&&null!==n},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(n){var t=m(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(n){var t=m(n).claims,e=Math.floor((new Date).getTime()/1e3),r=0,l=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),l=t.hasOwnProperty("exp")?t.exp:r+86400),!!e&&!!r&&!!l&&e>=r&&e<=l},t.issuedAtTime=function(n){var t=m(n).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(n,t,e){var r={};for(var l in n)r[l]=t.call(e,n[l],l,n);return r},t.querystring=function(n){var t=[];return _(n,function(n,e){Array.isArray(e)?e.forEach(function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}),t.length?"&"+t.join("&"):""},t.querystringDecode=function(n){var t={};return n.replace(/^\?/,"").split("&").forEach(function(n){if(n){var e=n.split("=");t[e[0]]=e[1]}}),t},t.safeGet=function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]},t.stringLength=function(n){for(var t=0,e=0;e<n.length;e++){var r=n.charCodeAt(e);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,e++):t+=3}return t},t.stringToByteArray=function(n){for(var t=[],e=0,r=0;r<n.length;r++){var l=n.charCodeAt(r);if(l>=55296&&l<=56319){var i=l-55296;o(++r<n.length,"Surrogate pair missing trail surrogate."),l=65536+(i<<10)+(n.charCodeAt(r)-56320)}l<128?t[e++]=l:l<2048?(t[e++]=l>>6|192,t[e++]=63&l|128):l<65536?(t[e++]=l>>12|224,t[e++]=l>>6&63|128,t[e++]=63&l|128):(t[e++]=l>>18|240,t[e++]=l>>12&63|128,t[e++]=l>>6&63|128,t[e++]=63&l|128)}return t},t.stringify=function(n){return JSON.stringify(n)},t.validateArgCount=function(n,t,e,r){var l;if(r<t?l="at least "+t:r>e&&(l=0===e?"none":"no more than "+e),l)throw new Error(n+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+l+".")},t.validateCallback=function(n,t,e,r){if((!r||e)&&"function"!=typeof e)throw new Error(O(n,t,r)+"must be a valid function.")},t.validateContextObject=function(n,t,e,r){if((!r||e)&&("object"!=typeof e||null===e))throw new Error(O(n,t,r)+"must be a valid context object.")},t.validateNamespace=function(n,t,e,r){if((!r||e)&&"string"!=typeof e)throw new Error(O(n,t,r)+"must be a valid firebase namespace.")}}}]);